{"version":3,"sources":["constants/userConstants.js","constants/orderConstants.js","actions/userActions.js","components/SearchBox.js","components/Header.js","components/Footer.js","components/Rating.js","components/Product.js","components/Paginate.js","components/Message.js","constants/productConstants.js","actions/productActions.js","components/BasicSkeleton.js","components/SkeletonShimmer.js","components/CarouselSkeleton.js","components/ProductCarousel.js","components/Meta.js","components/ProductSkeleton.js","pages/HomePage.js","components/ImageMagnifier.js","components/Loader.js","actions/orderActions.js","utils/getDateString.js","pages/ProductPage.js","constants/cartConstants.js","actions/cartActions.js","pages/CartPage.js","components/FormContainer.js","assets/googleLogo.png","components/SocialLoginOptions.js","assets/twitterLogo.png","assets/linkedinLogo.png","pages/LoginPage.js","pages/RegisterPage.js","pages/ProfilePage.js","pages/ConfirmPage.js","components/CheckoutStatus.js","pages/ShippingPage.js","pages/PaymentPage.js","pages/PlaceOrderPage.js","components/CheckoutForm.js","pages/OrderPage.js","pages/PasswordResetPage.js","pages/UserListPage.js","pages/UserEditPage.js","pages/ProductListPage.js","pages/ProductEditPage.js","pages/OrderListPage.js","assets/404Error.png","pages/ErrorPage.js","serviceWorkerRegistration.js","ServiceWorkerWrapper.js","App.js","store.js","reducers/productReducers.js","reducers/cartReducers.js","reducers/userReducers.js","reducers/orderReducers.js","index.js"],"names":["USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_LOGIN_FAILURE","USER_LOGIN_REFRESH_REQUEST","USER_LOGIN_REFRESH_SUCCESS","USER_LOGIN_REFRESH_FAILURE","USER_LOGOUT","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAILURE","USER_RESET_PASSWORD_REQUEST","USER_RESET_PASSWORD_SUCCESS","USER_RESET_PASSWORD_FAILURE","USER_EMAIL_VERIFICATION_REQUEST","USER_EMAIL_VERIFICATION_SUCCESS","USER_EMAIL_VERIFICATION_FAILURE","USER_CONFIRM_REQUEST","USER_CONFIRM_SUCCESS","USER_CONFIRM_FAILURE","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_DETAILS_FAILURE","USER_DETAILS_RESET","USER_PROFILE_UPDATE_REQUEST","USER_PROFILE_UPDATE_SUCCESS","USER_PROFILE_UPDATE_FAILURE","USER_PROFILE_UPDATE_RESET","USER_LIST_REQUEST","USER_LIST_SUCCESS","USER_LIST_FAILURE","USER_LIST_RESET","USER_DELETE_REQUEST","USER_DELETE_SUCCESS","USER_DELETE_FAILURE","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAILURE","USER_UPDATE_RESET","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_CREATE_FAILURE","ORDER_CREATE_RESET","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAILURE","ORDER_PAY_REQUEST","ORDER_PAY_SUCCESS","ORDER_PAY_FAILURE","ORDER_PAY_RESET","ORDER_DELIVER_REQUEST","ORDER_DELIVER_SUCCESS","ORDER_DELIVER_FAILURE","ORDER_DELIVER_RESET","ORDER_USER_LIST_REQUEST","ORDER_USER_LIST_SUCCESS","ORDER_USER_LIST_FAILURE","ORDER_USER_LIST_RESET","ORDER_ALL_LIST_REQUEST","ORDER_ALL_LIST_SUCCESS","ORDER_ALL_LIST_FAILURE","refreshLogin","email","dispatch","getState","a","type","userInfo","userLogin","isSocialLogin","payload","config","headers","axios","post","token","refreshToken","data","success","updatedUser","accessToken","localStorage","setItem","JSON","stringify","removeItem","response","message","getUserDetails","id","Authorization","get","updateUserProfile","user","isSocial","put","SearchBox","history","useState","keyword","setKeyword","Form","onSubmit","e","preventDefault","trim","push","className","InputGroup","Control","style","border","borderRight","name","onChange","target","value","placeholder","Text","background","borderLeft","aria-label","margin","outline","padding","color","Header","useDispatch","useSelector","state","cart","cartItems","show1","setShow1","show2","setShow2","count","setCount","useEffect","reduce","acc","item","qty","handleLogout","window","location","href","display","innerHeight","minWidth","height","zIndex","position","onClick","Navbar","variant","Container","to","Brand","src","alt","render","Nav","justifyContent","isAdmin","Link","fontSize","innerWidth","NavDropdown","title","show","Item","avatar","Footer","rel","Rating","text","map","ele","idx","defaultProps","Product","product","Card","_id","Img","loading","image","Body","textDecoration","Title","as","rating","numReviews","price","toLocaleString","maximumFractionDigits","currency","Paginate","pages","page","forOrders","forUsers","Pagination","Array","keys","active","Number","Message","duration","children","dismissible","visible","setVisible","setTimeout","Alert","onClose","PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","PRODUCT_LIST_FAILURE","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_SUCCESS","PRODUCT_DETAILS_FAILURE","PRODUCT_DELETE_REQUEST","PRODUCT_DELETE_SUCCESS","PRODUCT_DELETE_FAILURE","PRODUCT_CREATE_REQUEST","PRODUCT_CREATE_SUCCESS","PRODUCT_CREATE_FAILURE","PRODUCT_CREATE_RESET","PRODUCT_UPDATE_REQUEST","PRODUCT_UPDATE_SUCCESS","PRODUCT_UPDATE_FAILURE","PRODUCT_UPDATE_RESET","PRODUCT_CREATE_REVIEW_REQUEST","PRODUCT_CREATE_REVIEW_SUCCESS","PRODUCT_CREATE_REVIEW_FAILURE","PRODUCT_CREATE_REVIEW_RESET","PRODUCT_TOP_RATED_REQUEST","PRODUCT_TOP_RATED_SUCCESS","PRODUCT_TOP_RATED_FAILURE","listProducts","pageNumber","pageSize","listProductDetails","BasicSkeleton","classes","SkeletonShimmer","CarouselSkeleton","overflow","ProductCarousel","productTopRated","error","products","Carousel","marginTop","pause","indicators","interval","CarouselItem","Image","fluid","Meta","description","keywords","content","ProductSkeleton","HomePage","match","params","promptVerfication","setPromptVerification","setProducts","productAvailable","setProductAvailable","productList","userInfoError","userDetails","parse","getItem","length","Row","Col","sm","md","lg","xl","ImageMagnifier","width","magnifierHeight","magnifieWidth","zoomLevel","x","y","setXY","imgWidth","imgHeight","setSize","showMagnifier","setShowMagnifier","onMouseEnter","currentTarget","getBoundingClientRect","onMouseMove","top","left","pageX","pageXOffset","pageY","pageYOffset","onMouseLeave","pointerEvents","opacity","backgroundColor","backgroundImage","backgroundRepeat","borderRadius","backgroundSize","backgroundPositionX","backgroundPositionY","Loader","Spinner","animation","role","payOrder","orderID","paymentResult","listMyOrders","getDateString","date","showTime","options","year","month","day","timeStr","Date","toLocaleTimeString","timeStyle","hour12","timeZone","result","toLocaleDateString","ProductPage","quantity","setQuantity","setRating","review","setReview","allReviews","setAllReviews","hasOrderedItem","setHasOrderedItem","showReviewForm","setShowReviewForm","productDetails","userLoginError","productCreateReview","loadingCreateReview","successCreateReview","errorCreateReview","orders","orderListUser","alert","reviews","flag","obj","orderItems","toString","sortedArr","sort","b","createdAt","ListGroup","countInStock","Button","disabled","productID","createProductReview","Group","controlId","default","FloatingLabel","label","row","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_RESET","CART_SAVE_SHIPPING_ADDRESS","CART_SAVE_PAYMENT_METHOD","addItem","console","savePaymentMethod","log","CartPage","totalItems","setTotalItems","search","split","handleRemoveFromCart","alignItems","rounded","ButtonGroup","size","FormContainer","xs","SocialLoginOptions","baseURL","process","fleFlow","objectFit","googleLogo","LoginPage","authFailedMsg","setAuthFailedMsg","showRedirectMsg","setShowRedirectMsg","forgotPassword","setForgotPassword","showLoading","setShowLoading","emailSent","setEmailSent","setType","setEmail","password","setPassword","redirect","storedInfo","includes","queries","isSuccess","then","userData","isConfirmed","handleEmailSubmit","boxShadow","WebkitBoxShadow","MozBoxShadow","cursor","loginUser","required","stopPropagation","marginLeft","RegisterPage","typePassword","setTypePassword","typeConfirmPassword","setTypeConfirmPassword","setName","confirmPassword","setConfirmPassword","setMessage","userRegister","registerUser","ProfilePage","inputFile","useRef","showSubmitButton","setShowSubmitButton","setAvatar","allOrders","setAllOrders","uploading","setUploading","errorImageUpload","setErrorImageUpload","userProfileUpdate","loadingOrdersList","errorOrdersList","userSendEmailVerfication","hasError","handleImageUpload","file","files","formData","FormData","append","fontWeight","focus","sendVerficationEmail","flexFlow","alignSelf","marginBottom","current","click","accept","ref","Table","striped","bordered","responsive","order","textAlign","totalPrice","isPaid","paidAt","isDelivered","deliveredAt","ConfirmPage","userConfirm","isLoggedIn","setIsLoggedIn","emailToken","alreadyLoggedIn","confirmUser","CheckoutStatus","step1","step2","step3","step4","ShippingPage","shippingAddress","address","setAddress","city","setCity","postalCode","setPostalCode","country","setCountry","PaymentPage","paymentMethod","setPaymentMethod","handleChange","Check","inline","checked","PlaceOrderPage","orderCreate","itemsPrice","shippingPrice","taxPrice","createOrder","CheckoutForm","setError","clientSecret","setClientSecret","stripe","useStripe","elements","useElements","getClientSecret","makePayment","confirmCardPayment","payment_method","card","getElement","CardElement","billing_details","paymentIntent","paymentMode","reload","base","invalid","OrderPage","stripePromise","loadStripe","SDKReady","setSDKReady","orderDetails","orderPay","loadingPay","successPay","orderDeliver","loadingDeliver","successDeliver","getOrderDetails","addScript","clientID","script","document","createElement","async","onload","body","appendChild","shape","layout","amount","toFixed","onSuccess","deliverOrder","PasswordResetPage","userResetPassword","resetPassword","nameFromLocalStorage","passwordToken","resetUserPassword","paddingLeft","UserListPage","userList","users","total","successDelete","userDelete","listAllUsers","handleDelete","confirm","delete","deleteUser","UserEditPage","userId","setIsAdmin","userUpdate","loadingUpdate","errorUpdate","successUpdate","newUserInfo","updateUser","Label","ProductListPage","productDelete","loadingDelete","errorDelete","productCreate","loadingCreate","successCreate","errorCreate","createdProduct","deleteProduct","category","brand","ProductEditPage","productId","setBrand","setCategory","setDescription","setImage","setPrice","setCountInStock","productUpdate","handleFileUpload","updateProduct","min","max","step","orderListAll","listAllOrders","ErrorPage","errorImg","isLocalhost","Boolean","hostname","register","navigator","URL","origin","addEventListener","swUrl","fetch","contentType","status","indexOf","serviceWorker","ready","registration","unregister","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","ServiceWorkerWrapper","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","waiting","serviceWorkerRegistration","reloadPage","postMessage","ToastContainer","Toast","bg","App","path","component","exact","OrderListPage","reducer","combineReducers","action","existingItem","find","filter","userLoginRefresh","tokenInfo","isLoading","cartItemsFromLocalStorage","userInfoFromLocalStorage","shippingAddressFromLocalStorage","tokenInfoFromLocalStoage","initialState","middleware","thunk","store","createStore","composeWithDevTools","applyMiddleware","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.357b3783.chunk.js","sourcesContent":["export const USER_LOGIN_REQUEST = 'USER_LOGIN_REQUEST';\r\nexport const USER_LOGIN_SUCCESS = 'USER_LOGIN_SUCCESS';\r\nexport const USER_LOGIN_FAILURE = 'USER_LOGIN_FAILURE';\r\nexport const USER_LOGIN_REFRESH_REQUEST = 'USER_LOGIN_REFRESH_REQUEST';\r\nexport const USER_LOGIN_REFRESH_SUCCESS = 'USER_LOGIN_REFRESH_SUCCESS';\r\nexport const USER_LOGIN_REFRESH_FAILURE = 'USER_LOGIN_REFRESH_FAILURE';\r\nexport const USER_LOGOUT = 'USER_LOGOUT';\r\n\r\nexport const USER_REGISTER_REQUEST = 'USER_REGISTER_REQUEST';\r\nexport const USER_REGISTER_SUCCESS = 'USER_REGISTER_SUCCESS';\r\nexport const USER_REGISTER_FAILURE = 'USER_REGISTER_FAILURE';\r\n\r\nexport const USER_RESET_PASSWORD_REQUEST = 'USER_RESET_PASSWORD_REQUEST';\r\nexport const USER_RESET_PASSWORD_SUCCESS = 'USER_RESET_PASSWORD_SUCCESS';\r\nexport const USER_RESET_PASSWORD_FAILURE = 'USER_RESET_PASSWORD_FAILURE';\r\n\r\n// To send the email verification link\r\nexport const USER_EMAIL_VERIFICATION_REQUEST =\r\n\t'USER_EMAIL_VERIFICATION_REQUEST';\r\nexport const USER_EMAIL_VERIFICATION_SUCCESS =\r\n\t'USER_EMAIL_VERIFICATION_SUCCESS';\r\nexport const USER_EMAIL_VERIFICATION_FAILURE =\r\n\t'USER_EMAIL_VERIFICATION_FAILURE';\r\n\r\n// To actually verify the email token and confirm the user email\r\nexport const USER_CONFIRM_REQUEST = 'USER_CONFIRM_REQUEST';\r\nexport const USER_CONFIRM_SUCCESS = 'USER_CONFIRM_SUCCESS';\r\nexport const USER_CONFIRM_FAILURE = 'USER_CONFIRM_FAILURE';\r\n\r\nexport const USER_DETAILS_REQUEST = 'USER_DETAILS_REQUEST';\r\nexport const USER_DETAILS_SUCCESS = 'USER_DETAILS_SUCCESS';\r\nexport const USER_DETAILS_FAILURE = 'USER_DETAILS_FAILURE';\r\nexport const USER_DETAILS_RESET = 'USER_DETAILS_RESET';\r\n\r\nexport const USER_PROFILE_UPDATE_REQUEST = 'USER_PROFILE_UPDATE_REQUEST';\r\nexport const USER_PROFILE_UPDATE_SUCCESS = 'USER_PROFILE_UPDATE_SUCCESS';\r\nexport const USER_PROFILE_UPDATE_FAILURE = 'USER_PROFILE_UPDATE_FAILURE';\r\nexport const USER_PROFILE_UPDATE_RESET = 'USER_PROFILE_UPDATE_RESET';\r\n\r\nexport const USER_LIST_REQUEST = 'USER_LIST_REQUEST';\r\nexport const USER_LIST_SUCCESS = 'USER_LIST_SUCCESS';\r\nexport const USER_LIST_FAILURE = 'USER_LIST_FAILURE';\r\nexport const USER_LIST_RESET = 'USER_LIST_RESET';\r\n\r\nexport const USER_DELETE_REQUEST = 'USER_DELETE_REQUEST';\r\nexport const USER_DELETE_SUCCESS = 'USER_DELETE_SUCCESS';\r\nexport const USER_DELETE_FAILURE = 'USER_DELETE_FAILURE';\r\n\r\nexport const USER_UPDATE_REQUEST = 'USER_UPDATE_REQUEST';\r\nexport const USER_UPDATE_SUCCESS = 'USER_UPDATE_SUCCESS';\r\nexport const USER_UPDATE_FAILURE = 'USER_UPDATE_FAILURE';\r\nexport const USER_UPDATE_RESET = 'USER_UPDATE_RESET';\r\n","export const ORDER_CREATE_REQUEST = 'ORDER_CREATE_REQUEST';\r\nexport const ORDER_CREATE_SUCCESS = 'ORDER_CREATE_SUCCESS';\r\nexport const ORDER_CREATE_FAILURE = 'ORDER_CREATE_FAILURE';\r\nexport const ORDER_CREATE_RESET = 'ORDER_CREATE_RESET';\r\n\r\nexport const ORDER_DETAILS_REQUEST = 'ORDER_DETAILS_REQUEST';\r\nexport const ORDER_DETAILS_SUCCESS = 'ORDER_DETAILS_SUCCESS';\r\nexport const ORDER_DETAILS_FAILURE = 'ORDER_DETAILS_FAILURE';\r\n\r\nexport const ORDER_PAY_REQUEST = 'ORDER_PAY_REQUEST';\r\nexport const ORDER_PAY_SUCCESS = 'ORDER_PAY_SUCCESS';\r\nexport const ORDER_PAY_FAILURE = 'ORDER_PAY_FAILURE';\r\nexport const ORDER_PAY_RESET = 'ORDER_PAY_RESET';\r\n\r\nexport const ORDER_DELIVER_REQUEST = 'ORDER_DELIVER_REQUEST';\r\nexport const ORDER_DELIVER_SUCCESS = 'ORDER_DELIVER_SUCCESS';\r\nexport const ORDER_DELIVER_FAILURE = 'ORDER_DELIVER_FAILURE';\r\nexport const ORDER_DELIVER_RESET = 'ORDER_DELIVER_RESET';\r\n\r\nexport const ORDER_USER_LIST_REQUEST = 'ORDER_USER_LIST_REQUEST';\r\nexport const ORDER_USER_LIST_SUCCESS = 'ORDER_USER_LIST_SUCCESS';\r\nexport const ORDER_USER_LIST_FAILURE = 'ORDER_USER_LIST_FAILURE';\r\nexport const ORDER_USER_LIST_RESET = 'ORDER_USER_LIST_RESET';\r\n\r\nexport const ORDER_ALL_LIST_REQUEST = 'ORDER_ALL_LIST_REQUEST';\r\nexport const ORDER_ALL_LIST_SUCCESS = 'ORDER_ALL_LIST_SUCCESS';\r\nexport const ORDER_ALL_LIST_FAILURE = 'ORDER_ALL_LIST_FAILURE';\r\n","import {\r\n\tUSER_LOGIN_REQUEST,\r\n\tUSER_LOGIN_SUCCESS,\r\n\tUSER_LOGIN_FAILURE,\r\n\tUSER_LOGIN_REFRESH_REQUEST,\r\n\tUSER_LOGIN_REFRESH_SUCCESS,\r\n\tUSER_LOGIN_REFRESH_FAILURE,\r\n\tUSER_LOGOUT,\r\n\tUSER_REGISTER_REQUEST,\r\n\tUSER_REGISTER_SUCCESS,\r\n\tUSER_REGISTER_FAILURE,\r\n\tUSER_RESET_PASSWORD_REQUEST,\r\n\tUSER_RESET_PASSWORD_SUCCESS,\r\n\tUSER_RESET_PASSWORD_FAILURE,\r\n\tUSER_EMAIL_VERIFICATION_REQUEST,\r\n\tUSER_EMAIL_VERIFICATION_SUCCESS,\r\n\tUSER_EMAIL_VERIFICATION_FAILURE,\r\n\tUSER_CONFIRM_REQUEST,\r\n\tUSER_CONFIRM_SUCCESS,\r\n\tUSER_CONFIRM_FAILURE,\r\n\tUSER_DETAILS_REQUEST,\r\n\tUSER_DETAILS_SUCCESS,\r\n\tUSER_DETAILS_FAILURE,\r\n\tUSER_DETAILS_RESET,\r\n\tUSER_PROFILE_UPDATE_REQUEST,\r\n\tUSER_PROFILE_UPDATE_SUCCESS,\r\n\tUSER_PROFILE_UPDATE_FAILURE,\r\n\tUSER_LIST_REQUEST,\r\n\tUSER_LIST_SUCCESS,\r\n\tUSER_LIST_FAILURE,\r\n\tUSER_DELETE_REQUEST,\r\n\tUSER_DELETE_SUCCESS,\r\n\tUSER_DELETE_FAILURE,\r\n\tUSER_UPDATE_REQUEST,\r\n\tUSER_UPDATE_SUCCESS,\r\n\tUSER_UPDATE_FAILURE,\r\n} from '../constants/userConstants';\r\nimport {\r\n\tORDER_CREATE_RESET,\r\n\tORDER_USER_LIST_RESET,\r\n} from '../constants/orderConstants';\r\nimport axios from 'axios';\r\n\r\n// login an user, can be a social login or a normal email verified login\r\nexport const loginUser = (email, password) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_LOGIN_REQUEST });\r\n\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/login',\r\n\t\t\t{ email, password },\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\tpayload: { ...data, isSocialLogin: false },\r\n\t\t});\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_REFRESH_SUCCESS,\r\n\t\t\tpayload: data.refreshToken,\r\n\t\t});\r\n\t\t// store the refresh token and the rest of the user info in the local storage\r\n\t\tlocalStorage.setItem('refreshToken', data.refreshToken);\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'userInfo',\r\n\t\t\tJSON.stringify({ ...data, isSocialLogin: false })\r\n\t\t);\r\n\t\t// remove the variable that helps prompt the user that email is not verified, each time they login\r\n\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// used for refreshing the access tokens when the user logs in using email and password\r\nexport const refreshLogin = (email) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_LOGIN_REFRESH_REQUEST });\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// avoid this if social login\r\n\t\tif (userInfo.isSocialLogin) {\r\n\t\t\tdispatch({ type: USER_LOGIN_REFRESH_SUCCESS, payload: null });\r\n\t\t} else {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/users/refresh',\r\n\t\t\t\t{\r\n\t\t\t\t\temail,\r\n\t\t\t\t\ttoken: userInfo.refreshToken,\r\n\t\t\t\t},\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tif (data.success) {\r\n\t\t\t\tdispatch({ type: USER_LOGIN_REFRESH_SUCCESS, payload: data });\r\n\t\t\t\tconst updatedUser = {\r\n\t\t\t\t\t...userInfo,\r\n\t\t\t\t\taccessToken: data.accessToken,\r\n\t\t\t\t\trefreshToken: userInfo.refreshToken,\r\n\t\t\t\t};\r\n\t\t\t\t// update the local storage\r\n\t\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(updatedUser));\r\n\t\t\t\tdispatch({ type: USER_LOGIN_SUCCESS, payload: updatedUser });\r\n\t\t\t} else if (!data.success) {\r\n\t\t\t\t// set a variable in local storage which redirects to login page, if this refresh thing fails\r\n\t\t\t\tlocalStorage.removeItem('userInfo');\r\n\t\t\t\tlocalStorage.setItem('redirectLogin', 'true'); // after refresh token also expires, redirect to login page after loggin out the user\r\n\t\t\t\tdispatch({ type: USER_LOGOUT });\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_REFRESH_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// logout by removing all local storage info\r\nexport const logoutUser = () => (dispatch) => {\r\n\tlocalStorage.removeItem('userInfo');\r\n\tlocalStorage.removeItem('redirectLogin');\r\n\tlocalStorage.removeItem('cartItems');\r\n\tdispatch({ type: USER_LOGOUT });\r\n\tdispatch({ type: USER_DETAILS_RESET });\r\n\tdispatch({ type: ORDER_CREATE_RESET });\r\n\tdispatch({ type: ORDER_USER_LIST_RESET });\r\n};\r\n\r\n// register a new user with the form for name, email, password\r\nexport const registerUser = (name, email, password) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_REGISTER_REQUEST });\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/',\r\n\t\t\t{ name, email, password },\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: USER_REGISTER_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_REGISTER_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// send an email for verification of the newly registered account\r\nexport const sendVerficationEmail = (email) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_EMAIL_VERIFICATION_REQUEST });\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/confirm',\r\n\t\t\t{ email },\r\n\t\t\tconfig\r\n\t\t);\r\n\t\tdispatch({ type: USER_EMAIL_VERIFICATION_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_EMAIL_VERIFICATION_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// take the email token sent from the mail, and confirm the account once the link is clicked\r\nexport const confirmUser =\r\n\t(emailToken, alreadyLoggedIn = false) =>\r\n\tasync (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: USER_CONFIRM_REQUEST });\r\n\t\t\tconst { data } = await axios.get(\r\n\t\t\t\t`/api/users/confirm/${emailToken}`\r\n\t\t\t);\r\n\r\n\t\t\t// remove variable meant to prompt the user for email verification\r\n\t\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t\t\tdispatch({ type: USER_CONFIRM_SUCCESS, payload: true });\r\n\r\n\t\t\tif (alreadyLoggedIn) {\r\n\t\t\t\tdispatch({ type: USER_LOGIN_SUCCESS, payload: data });\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: USER_LOGIN_REFRESH_SUCCESS,\r\n\t\t\t\t\tpayload: data.refreshToken,\r\n\t\t\t\t});\r\n\t\t\t\tlocalStorage.setItem('refreshToken', data.refreshToken);\r\n\t\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(data));\r\n\t\t\t}\r\n\r\n\t\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_CONFIRM_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// reset the user password and send one more verification email from the server\r\nexport const resetUserPassword =\r\n\t(passwordToken, password) => async (dispatch) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: USER_RESET_PASSWORD_REQUEST });\r\n\r\n\t\t\t// make the api call to reset the password\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.put(\r\n\t\t\t\t'/api/users/reset',\r\n\t\t\t\t{ passwordToken, password },\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: USER_RESET_PASSWORD_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_RESET_PASSWORD_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// get user details for profile page\r\nexport const getUserDetails = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_DETAILS_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tif (userInfo.isSocialLogin) {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tlet { data } = await axios.post(\r\n\t\t\t\t'/api/users/passport/data/',\r\n\t\t\t\t{ id },\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_DETAILS_SUCCESS,\r\n\t\t\t\tpayload: { ...data, isSocialLogin: true },\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.get(`/api/users/${id}`, config);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_DETAILS_SUCCESS,\r\n\t\t\t\tpayload: { ...data, isSocialLogin: false },\r\n\t\t\t});\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_DETAILS_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// update details in the user profile page\r\nexport const updateUserProfile = (user) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_PROFILE_UPDATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst isSocial = userInfo.isSocialLogin;\r\n\t\tconst { data } = await axios.put('/api/users/profile', user, config);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: USER_PROFILE_UPDATE_SUCCESS,\r\n\t\t\tpayload: { ...data, isSocialLogin: isSocial },\r\n\t\t});\r\n\r\n\t\t// login the user after updating the information\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\tpayload: { ...data, isSocialLogin: isSocial },\r\n\t\t});\r\n\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'userInfo',\r\n\t\t\tJSON.stringify({ ...data, isSocialLogin: isSocial })\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_PROFILE_UPDATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// fetch a list of all users, for the admin panel view\r\nexport const listAllUsers =\r\n\t(pageNumber = '') =>\r\n\tasync (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: USER_LIST_REQUEST });\r\n\r\n\t\t\tconst {\r\n\t\t\t\tuserLogin: { userInfo },\r\n\t\t\t} = getState();\r\n\r\n\t\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\r\n\t\t\tconst { data } = await axios.get(\r\n\t\t\t\t`/api/users?pageNumber=${pageNumber}`,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: USER_LIST_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_LIST_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// delete the user from the admin panel view\r\nexport const deleteUser = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_DELETE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tawait axios.delete(`/api/users/${id}`, config);\r\n\r\n\t\tdispatch({ type: USER_DELETE_SUCCESS });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_DELETE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// update the user details\r\nexport const updateUser = (user) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_UPDATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst isSocial = userInfo.isSocialLogin;\r\n\t\tconst { data } = await axios.put(\r\n\t\t\t`/api/users/${user._id}`,\r\n\t\t\tuser,\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: USER_UPDATE_SUCCESS });\r\n\t\tdispatch({\r\n\t\t\ttype: USER_DETAILS_SUCCESS,\r\n\t\t\tpayload: { ...data, isSocialLogin: isSocial },\r\n\t\t});\r\n\r\n\t\tif (data.id === userInfo.id) {\r\n\t\t\t// // login the user after updating the information\r\n\t\t\tconst newUserInfo = {\r\n\t\t\t\t...userInfo,\r\n\t\t\t\t...userInfo,\r\n\t\t\t\tid: data.id,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\temail: data.email,\r\n\t\t\t\tisAdmin: data.isAdmin,\r\n\t\t\t\tisConfirmed: data.isConfirmed,\r\n\t\t\t};\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\t\tpayload: newUserInfo,\r\n\t\t\t});\r\n\r\n\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(newUserInfo));\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_UPDATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Form, InputGroup } from 'react-bootstrap';\r\n\r\nconst SearchBox = ({ history }) => {\r\n\tconst [keyword, setKeyword] = useState('');\r\n\r\n\t// search for the keyword by redirecting to homepage with param\r\n\tconst handleSearch = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (keyword.trim()) {\r\n\t\t\thistory.push(`/search/${keyword}`);\r\n\t\t} else {\r\n\t\t\thistory.push('/');\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Form onSubmit={handleSearch} className='d-flex'>\r\n\t\t\t{/* display searchbar inside navbar in large screens only */}\r\n\t\t\t<InputGroup className='mt-2'>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tborder: '1px solid #2c3e50',\r\n\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tname='keyword'\r\n\t\t\t\t\tclassName='mr-sm-2 ml-sm-4'\r\n\t\t\t\t\tonChange={(e) => setKeyword(e.target.value)}\r\n\t\t\t\t\tplaceholder='Search Products...'\r\n\t\t\t\t\tvalue={keyword}\r\n\t\t\t\t/>\r\n\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackground: 'white',\r\n\t\t\t\t\t\tborder: '1px solid #2c3e50',\r\n\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\taria-label='search'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmargin: '0',\r\n\t\t\t\t\t\t\tborder: '0',\r\n\t\t\t\t\t\t\toutline: '0',\r\n\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype='submit'>\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tstyle={{ color: '#95a5a6' }}\r\n\t\t\t\t\t\t\tclassName='fas fa-search'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</InputGroup.Text>\r\n\t\t\t</InputGroup>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default SearchBox;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navbar, Nav, Container, NavDropdown } from \"react-bootstrap\";\r\nimport { logoutUser } from \"../actions/userActions\";\r\nimport { Route } from \"react-router-dom\";\r\nimport SearchBox from \"./SearchBox\";\r\nimport \"../styles/header.css\";\r\n\r\nconst Header = () => {\r\n  const dispatch = useDispatch();\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const cart = useSelector((state) => state.cart);\r\n  const { userInfo } = userLogin;\r\n  const { cartItems } = cart;\r\n\r\n  const [show1, setShow1] = useState(false); // to close dropdown when clicking anywhere outside\r\n  const [show2, setShow2] = useState(false); // to close dropdown when clicking anywhere outside\r\n  const [count, setCount] = useState(0);\r\n\r\n  // update count when new cart changes\r\n  useEffect(() => {\r\n    setCount(cartItems.reduce((acc, item) => acc + item.qty, 0));\r\n  }, [cartItems]);\r\n\r\n  // close the second dropdown when it is open and user clicks anywhere else\r\n  const handleDropdown2 = (e) => {\r\n    if (show2) {\r\n      setShow2(false);\r\n    } else {\r\n      setShow2(true);\r\n      setShow1(false);\r\n    }\r\n  };\r\n\r\n  // close the first dropdown when it is open and user clicks anywhere else\r\n  const handleDropdown1 = (e) => {\r\n    if (show1) {\r\n      setShow1(false);\r\n    } else {\r\n      setShow1(true);\r\n      setShow2(false);\r\n    }\r\n  };\r\n\r\n  // dispatch action to logout user\r\n  const handleLogout = () => {\r\n    dispatch(logoutUser());\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  // render different navbars for large and small screens without navbar toggle\r\n  return (\r\n    <header>\r\n      {/* this section covers entire screen except the dropdown, to handle onclicks */}\r\n      <section\r\n        className=\"navbar-dropdown-cover\"\r\n        style={{\r\n          display:\r\n            window.innerHeight > 430 && (show1 || show2) ? \"block\" : \"none\",\r\n          minWidth: \"100%\",\r\n          height: \"100%\",\r\n          zIndex: \"100\",\r\n          position: \"absolute\",\r\n        }}\r\n        onClick={() => {\r\n          setShow1(false);\r\n          setShow2(false);\r\n        }}\r\n      />\r\n\r\n      {/* conditionally render different navbars for the mobile sreens */}\r\n      <Navbar className=\"navbar\" variant=\"light\">\r\n        <Container>\r\n          <LinkContainer\r\n            to=\"/\"\r\n            style={{\r\n              color: \"white\",\r\n            }}\r\n          >\r\n            <Navbar.Brand>\r\n              <img\r\n                src=\"/images/thestylestudio.png\"\r\n                className=\"nav-logo\"\r\n                alt=\"logo\"\r\n              />\r\n              The Style Studio\r\n            </Navbar.Brand>\r\n          </LinkContainer>\r\n\r\n          {/* history is available only inside Route, so this is used */}\r\n          {/* display searchbar inside navbar in large screens only */}\r\n          <Route\r\n            render={({ history }) => (\r\n              <div className=\"d-none d-md-block\">\r\n                <SearchBox history={history} />\r\n              </div>\r\n            )}\r\n          />\r\n\r\n          <Nav\r\n            className=\"ms-auto nav-mobile\"\r\n            style={\r\n              userInfo\r\n                ? {\r\n                    justifyContent: \"space-between\",\r\n                  }\r\n                : {\r\n                    justifyContent: \"space-evenly\",\r\n                  }\r\n            }\r\n          >\r\n            {userInfo && userInfo.isAdmin && (\r\n              <>\r\n                {/* display this only on mobile screens */}\r\n                <LinkContainer\r\n                  className=\"d-block d-md-none\"\r\n                  to=\"/admin/userlist\"\r\n                >\r\n                  <Nav.Link>\r\n                    <i className=\"fas fa-users\" />\r\n                  </Nav.Link>\r\n                </LinkContainer>\r\n                <LinkContainer\r\n                  className=\"d-block d-md-none\"\r\n                  to=\"/admin/orderlist\"\r\n                >\r\n                  <Nav.Link>\r\n                    <i className=\"fas fa-user-shield\" />\r\n                  </Nav.Link>\r\n                </LinkContainer>\r\n                <LinkContainer\r\n                  className=\"d-block d-md-none\"\r\n                  to=\"/admin/productlist\"\r\n                >\r\n                  <Nav.Link>\r\n                    <i className=\"fas fa-shopping-bag\" />\r\n                  </Nav.Link>\r\n                </LinkContainer>\r\n              </>\r\n            )}\r\n            <LinkContainer\r\n              to=\"/cart\"\r\n              style={{\r\n                color: \"white\",\r\n              }}\r\n            >\r\n              <Nav.Link>\r\n                {/* indicate cart size */}\r\n                {count ? (\r\n                  <div className=\"nav-cart-size\">\r\n                    <span\r\n                      style={\r\n                        count > 10\r\n                          ? { fontSize: \"0.6em\" }\r\n                          : { fontSize: \"0.7em\" }\r\n                      }\r\n                    >\r\n                      {count}\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                <i className=\"fas fa-shopping-cart navbar-icons\" />{\" \"}\r\n                {!(userInfo && userInfo.isAdmin) || window.innerWidth >= 430\r\n                  ? \"Cart\"\r\n                  : \"\"}\r\n              </Nav.Link>\r\n            </LinkContainer>\r\n            {userInfo && userInfo.isAdmin && (\r\n              // show this only on md screens and above\r\n              <NavDropdown\r\n                className=\"d-none d-md-block\"\r\n                title=\"Admin\"\r\n                id=\"adminMenu\"\r\n                show={show2}\r\n                onClick={handleDropdown2}\r\n              >\r\n                <LinkContainer to=\"/admin/userlist\">\r\n                  <NavDropdown.Item>Users</NavDropdown.Item>\r\n                </LinkContainer>\r\n                <LinkContainer to=\"/admin/productlist\">\r\n                  <NavDropdown.Item>Products</NavDropdown.Item>\r\n                </LinkContainer>\r\n                <LinkContainer to=\"/admin/orderlist\">\r\n                  <NavDropdown.Item>Orders</NavDropdown.Item>\r\n                </LinkContainer>\r\n              </NavDropdown>\r\n            )}\r\n\r\n            {userInfo && (\r\n              // show this only on mobile screens\r\n              <Nav.Link className=\"d-block d-md-none\" onClick={handleLogout}>\r\n                <i className=\"fas fa-sign-out-alt navbar-icons\" />{\" \"}\r\n                {!(userInfo && userInfo.isAdmin) && \"Logout\"}\r\n              </Nav.Link>\r\n            )}\r\n\r\n            {userInfo ? (\r\n              <div className=\"nav-avatar-container\">\r\n                {/* show this container only on mobile screens */}\r\n                <LinkContainer to=\"/profile\" className=\"d-block d-md-none\">\r\n                  <Nav.Link>\r\n                    <img\r\n                      src={userInfo.avatar}\r\n                      className=\"nav-avatar\"\r\n                      alt={userInfo.name}\r\n                    />\r\n                  </Nav.Link>\r\n                </LinkContainer>\r\n                <img\r\n                  src={userInfo.avatar}\r\n                  className=\"nav-avatar d-none d-md-block\"\r\n                  alt={userInfo.name}\r\n                />\r\n\r\n                {/* show this dropdown only on large screens */}\r\n                <NavDropdown\r\n                  className=\"d-none d-md-block\"\r\n                  title={userInfo.name}\r\n                  id={userInfo.id}\r\n                  show={show1}\r\n                  onClick={handleDropdown1}\r\n                >\r\n                  <LinkContainer to=\"/profile\">\r\n                    <NavDropdown.Item>Profile</NavDropdown.Item>\r\n                  </LinkContainer>\r\n                  <NavDropdown.Item onClick={handleLogout}>\r\n                    Logout\r\n                  </NavDropdown.Item>\r\n                </NavDropdown>\r\n              </div>\r\n            ) : (\r\n              <LinkContainer\r\n                to=\"/login\"\r\n                variant=\"primary\"\r\n                style={{\r\n                  color: \"white\",\r\n                }}\r\n              >\r\n                <Nav.Link>\r\n                  <i className=\"fas fa-user navbar-icons\" /> Sign In\r\n                </Nav.Link>\r\n              </LinkContainer>\r\n            )}\r\n          </Nav>\r\n        </Container>\r\n      </Navbar>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport \"../styles/footer.css\";\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <Container>\r\n      <footer className=\"footer-container\">\r\n        <div className=\"footer-icons\">\r\n          <a\r\n            href=\"https://github.com/VipinMamidi/WebDesigning_FinalProject\"\r\n            aria-label=\"github account\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            <i className=\"fab fa-github footer-icon\" />\r\n          </a>\r\n          <a\r\n            href=\"https://www.linkedin.com/\"\r\n            aria-label=\"linkedin account\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            <i className=\"fab fa-linkedin-in footer-icon\" />\r\n          </a>\r\n          <a\r\n            href=\"https://twitter.com/\"\r\n            aria-label=\"twitter account\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            <i className=\"fab fa-twitter footer-icon\" />\r\n          </a>\r\n          <a\r\n            href=\"mailto: thestylestudio6150@gmail.com\"\r\n            aria-label=\"developer portfolio\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            <i className=\"fas fa-envelope footer-icon\" />\r\n          </a>\r\n        </div>\r\n        <div className=\"footer-copyright\">&copy;2022 The Style Studio</div>\r\n      </footer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Rating = ({ value, text, color }) => {\r\n\treturn (\r\n\t\t// show full/half star icon depending on rating value\r\n\t\t<div className='rating'>\r\n\t\t\t{[1, 2, 3, 4, 5].map((ele, idx) => (\r\n\t\t\t\t<span key={idx}>\r\n\t\t\t\t\t<i\r\n\t\t\t\t\t\tstyle={{ color: color, fontSize: '0.9em' }}\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\tvalue >= ele\r\n\t\t\t\t\t\t\t\t? 'fas fa-star'\r\n\t\t\t\t\t\t\t\t: value >= ele - 0.5\r\n\t\t\t\t\t\t\t\t? 'fas fa-star-half-alt'\r\n\t\t\t\t\t\t\t\t: 'far fa-star'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttitle={`${value} Stars`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</span>\r\n\t\t\t))}\r\n\t\t\t<span style={{ fontSize: '0.9em' }}>{text && text}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nRating.defaultProps = {\r\n\tcolor: '#f8e825',\r\n};\r\n\r\nRating.propTypes = {\r\n\tvalue: PropTypes.number.isRequired,\r\n\ttext: PropTypes.string,\r\n\tcolor: PropTypes.string,\r\n};\r\n\r\nexport default Rating;\r\n","import React from \"react\";\r\nimport Rating from \"./Rating\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card } from \"react-bootstrap\";\r\nimport \"../styles/product.css\";\r\n\r\nconst Product = ({ product }) => {\r\n  return (\r\n    <Card className=\"mt-3 p-0\">\r\n      <Link to={`/product/${product._id}`}>\r\n        <Card.Img\r\n          loading=\"lazy\"\r\n          className=\"product-image\"\r\n          src={product.image}\r\n          variant=\"top\"\r\n          alt={product.name}\r\n        />\r\n      </Link>\r\n\r\n      <Card.Body>\r\n        <Link\r\n          to={`/product/${product._id}`}\r\n          style={{ color: \"dimgray\", textDecoration: \"none\" }}\r\n        >\r\n          <Card.Title className=\"product-title\" as=\"p\">\r\n            <strong>{product.name}</strong>\r\n          </Card.Title>\r\n        </Link>\r\n\r\n        <Card.Text as=\"div\">\r\n          {product && product.rating && (\r\n            <Rating\r\n              value={product.rating}\r\n              text={`${product.numReviews} Review${\r\n                product.numReviews > 1 ? \"s\" : \"\"\r\n              }`}\r\n            />\r\n          )}\r\n        </Card.Text>\r\n\r\n        <Card.Text as=\"h4\">\r\n          {product.price &&\r\n            product.price.toLocaleString(\"en-US\", {\r\n              maximumFractionDigits: 2,\r\n              style: \"currency\",\r\n              currency: \"USD\",\r\n            })}\r\n        </Card.Text>\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React from \"react\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\n\r\n// different paginate components for products, and for admin panel view\r\nconst Paginate = ({\r\n  pages,\r\n  page,\r\n  isAdmin = false,\r\n  keyword = \"\",\r\n  forOrders = false,\r\n  forUsers = false,\r\n}) => {\r\n  return (\r\n    pages > 1 && (\r\n      <Pagination>\r\n        {[...Array(pages).keys()].map((ele) => (\r\n          <LinkContainer\r\n            key={ele + 1}\r\n            to={\r\n              isAdmin\r\n                ? forOrders\r\n                  ? `/admin/orderlist/${ele + 1}`\r\n                  : forUsers\r\n                  ? `/admin/userlist/${ele + 1}`\r\n                  : `/admin/productlist/${ele + 1}`\r\n                : keyword\r\n                ? `/search/${keyword}/page/${ele + 1}`\r\n                : `/page/${ele + 1}`\r\n            }\r\n          >\r\n            <Pagination.Item active={ele + 1 === Number(page)}>\r\n              {ele + 1}\r\n            </Pagination.Item>\r\n          </LinkContainer>\r\n        ))}\r\n      </Pagination>\r\n    )\r\n  );\r\n};\r\n\r\nexport default Paginate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Alert } from \"react-bootstrap\";\r\n\r\nconst Message = ({ variant, duration, children, dismissible }) => {\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setVisible(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (duration) {\r\n      setTimeout(() => setVisible(false), duration * 1000);\r\n    }\r\n  }, [duration]);\r\n\r\n  return (\r\n    <Alert\r\n      onClose={() => setVisible(false)}\r\n      dismissible={dismissible}\r\n      className=\"alert-custom\"\r\n      style={visible ? { display: \"block\" } : { display: \"none\" }}\r\n      variant={variant}\r\n    >\r\n      {children}\r\n    </Alert>\r\n  );\r\n};\r\n\r\nMessage.defaultProps = {\r\n  variant: \"info\",\r\n  dismissible: false,\r\n};\r\n\r\nexport default Message;\r\n","export const PRODUCT_LIST_REQUEST = 'PRODUCT_LIST_REQUEST';\r\nexport const PRODUCT_LIST_SUCCESS = 'PRODUCT_LIST_SUCCESS';\r\nexport const PRODUCT_LIST_FAILURE = 'PRODUCT_LIST_FAILURE';\r\n\r\nexport const PRODUCT_DETAILS_REQUEST = 'PRODUCT_DETAILS_REQUEST';\r\nexport const PRODUCT_DETAILS_SUCCESS = 'PRODUCT_DETAILS_SUCCESS';\r\nexport const PRODUCT_DETAILS_FAILURE = 'PRODUCT_DETAILS_FAILURE';\r\n\r\nexport const PRODUCT_DELETE_REQUEST = 'PRODUCT_DELETE_REQUEST';\r\nexport const PRODUCT_DELETE_SUCCESS = 'PRODUCT_DELETE_SUCCESS';\r\nexport const PRODUCT_DELETE_FAILURE = 'PRODUCT_DELETE_FAILURE';\r\n\r\nexport const PRODUCT_CREATE_REQUEST = 'PRODUCT_CREATE_REQUEST';\r\nexport const PRODUCT_CREATE_SUCCESS = 'PRODUCT_CREATE_SUCCESS';\r\nexport const PRODUCT_CREATE_FAILURE = 'PRODUCT_CREATE_FAILURE';\r\nexport const PRODUCT_CREATE_RESET = 'PRODUCT_CREATE_RESET';\r\n\r\nexport const PRODUCT_UPDATE_REQUEST = 'PRODUCT_UPDATE_REQUEST';\r\nexport const PRODUCT_UPDATE_SUCCESS = 'PRODUCT_UPDATE_SUCCESS';\r\nexport const PRODUCT_UPDATE_FAILURE = 'PRODUCT_UPDATE_FAILURE';\r\nexport const PRODUCT_UPDATE_RESET = 'PRODUCT_UPDATE_RESET';\r\n\r\nexport const PRODUCT_CREATE_REVIEW_REQUEST = 'PRODUCT_CREATE_REVIEW_REQUEST';\r\nexport const PRODUCT_CREATE_REVIEW_SUCCESS = 'PRODUCT_CREATE_REVIEW_SUCCESS';\r\nexport const PRODUCT_CREATE_REVIEW_FAILURE = 'PRODUCT_CREATE_REVIEW_FAILURE';\r\nexport const PRODUCT_CREATE_REVIEW_RESET = 'PRODUCT_CREATE_REVIEW_RESET';\r\n\r\nexport const PRODUCT_TOP_RATED_REQUEST = 'PRODUCT_TOP_RATED_REQUEST';\r\nexport const PRODUCT_TOP_RATED_SUCCESS = 'PRODUCT_TOP_RATED_SUCCESS';\r\nexport const PRODUCT_TOP_RATED_FAILURE = 'PRODUCT_TOP_RATED_FAILURE';\r\n","import {\r\n\tPRODUCT_DETAILS_FAILURE,\r\n\tPRODUCT_DETAILS_REQUEST,\r\n\tPRODUCT_DETAILS_SUCCESS,\r\n\tPRODUCT_LIST_FAILURE,\r\n\tPRODUCT_LIST_REQUEST,\r\n\tPRODUCT_LIST_SUCCESS,\r\n\tPRODUCT_DELETE_FAILURE,\r\n\tPRODUCT_DELETE_REQUEST,\r\n\tPRODUCT_DELETE_SUCCESS,\r\n\tPRODUCT_CREATE_REQUEST,\r\n\tPRODUCT_CREATE_SUCCESS,\r\n\tPRODUCT_CREATE_FAILURE,\r\n\tPRODUCT_UPDATE_REQUEST,\r\n\tPRODUCT_UPDATE_SUCCESS,\r\n\tPRODUCT_UPDATE_FAILURE,\r\n\tPRODUCT_CREATE_REVIEW_REQUEST,\r\n\tPRODUCT_CREATE_REVIEW_SUCCESS,\r\n\tPRODUCT_CREATE_REVIEW_FAILURE,\r\n\tPRODUCT_TOP_RATED_REQUEST,\r\n\tPRODUCT_TOP_RATED_SUCCESS,\r\n\tPRODUCT_TOP_RATED_FAILURE,\r\n} from '../constants/productConstants';\r\nimport axios from 'axios';\r\n\r\n// list orders based on keyword and page number when paginated\r\nexport const listProducts =\r\n\t(keyword = '', pageNumber = '', pageSize = '') =>\r\n\tasync (dispatch) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: PRODUCT_LIST_REQUEST });\r\n\r\n\t\t\tconst { data } = await axios.get(\r\n\t\t\t\t`/api/products?keyword=${keyword}&pageNumber=${pageNumber}&pageSize=${pageSize}`\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: PRODUCT_LIST_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: PRODUCT_LIST_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// fetch details of a particular product\r\nexport const listProductDetails = (id) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_DETAILS_REQUEST });\r\n\r\n\t\tconst { data } = await axios.get(`/api/products/${id}`);\r\n\r\n\t\tdispatch({ type: PRODUCT_DETAILS_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_DETAILS_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// delete a particular product by taking an id\r\nexport const deleteProduct = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_DELETE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.delete(`/api/products/${id}`, config);\r\n\r\n\t\tdata && dispatch({ type: PRODUCT_DELETE_SUCCESS });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_DELETE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// create a product, when the user is an admin\r\nexport const createProduct = () => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_CREATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.post(`/api/products/`, {}, config);\r\n\r\n\t\tdispatch({ type: PRODUCT_CREATE_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_CREATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// update the product details from the admin panel view\r\nexport const updateProduct = (product) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_UPDATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.put(\r\n\t\t\t`/api/products/${product._id}`,\r\n\t\t\tproduct,\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: PRODUCT_UPDATE_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_UPDATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// create a new product review for particular product\r\nexport const createProductReview =\r\n\t(productID, review) => async (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: PRODUCT_CREATE_REVIEW_REQUEST });\r\n\r\n\t\t\tconst {\r\n\t\t\t\tuserLogin: { userInfo },\r\n\t\t\t} = getState();\r\n\r\n\t\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\r\n\t\t\tawait axios.post(\r\n\t\t\t\t`/api/products/${productID}/reviews`,\r\n\t\t\t\treview,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: PRODUCT_CREATE_REVIEW_SUCCESS });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: PRODUCT_CREATE_REVIEW_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// fetch the top rated products for the carousel\r\nexport const getTopRatedProducts = () => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_TOP_RATED_REQUEST });\r\n\r\n\t\tconst { data } = await axios.get('/api/products/top');\r\n\r\n\t\tdispatch({ type: PRODUCT_TOP_RATED_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_TOP_RATED_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n","import React from 'react';\r\nimport '../styles/skeleton.css';\r\n\r\nconst BasicSkeleton = ({ type }) => {\r\n\tconst classes = `skeleton ${type}`;\r\n\r\n\treturn <div className={classes} />;\r\n};\r\n\r\nexport default BasicSkeleton;\r\n","import React from 'react';\r\n\r\nconst SkeletonShimmer = () => {\r\n\treturn (\r\n\t\t<div className='shimmer-wrapper'>\r\n\t\t\t<div className='shimmer' />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SkeletonShimmer;\r\n","import React from 'react';\r\nimport BasicSkeleton from './BasicSkeleton';\r\nimport SkeletonShimmer from './SkeletonShimmer';\r\n\r\nconst CarouselSkeleton = () => {\r\n\treturn (\r\n\t\t<div style={{ position: 'relative', overflow: 'hidden' }}>\r\n\t\t\t<BasicSkeleton type='box' />\r\n\t\t\t<SkeletonShimmer />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CarouselSkeleton;\r\n","import React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Carousel, CarouselItem, Image } from \"react-bootstrap\";\r\nimport Message from \"./Message\";\r\nimport { getTopRatedProducts } from \"../actions/productActions\";\r\nimport \"../styles/product-carousel.css\";\r\nimport CarouselSkeleton from \"../components/CarouselSkeleton\";\r\n\r\nconst ProductCarousel = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const productTopRated = useSelector((state) => state.productTopRated);\r\n  const { error, loading, products } = productTopRated;\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopRatedProducts());\r\n  }, [dispatch]);\r\n  return (\r\n    <>\r\n      {loading && <CarouselSkeleton />}\r\n      {error && (\r\n        <Message dismissible variant=\"danger\">\r\n          {error}\r\n        </Message>\r\n      )}\r\n      {/* render carousel only on large screens */}\r\n      <Carousel\r\n        style={{ marginTop: \"0.5em\" }}\r\n        pause=\"hover\"\r\n        className=\"bg-primary\"\r\n        indicators={false}\r\n        interval={10000}\r\n      >\r\n        {products &&\r\n          products.map((product) => (\r\n            <CarouselItem key={product._id}>\r\n              <Link to={`/product/${product._id}`}>\r\n                <Image src={product.image} alt={product.name} fluid />\r\n              </Link>\r\n            </CarouselItem>\r\n          ))}\r\n      </Carousel>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductCarousel;\r\n","import React from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\n\r\nconst Meta = ({ title, description, keywords }) => {\r\n  return (\r\n    <Helmet>\r\n      <title>{title}</title>\r\n      <meta name=\"description\" content={description} />\r\n      <meta name=\"keywords\" content={keywords} />\r\n    </Helmet>\r\n  );\r\n};\r\n\r\nMeta.defaultProps = {\r\n  title: \"Welcome to The Style Studio\",\r\n  keywords: \"Clothing, Accessories and More!!!\",\r\n  description: \"Buy the best products at the lowest prices\",\r\n};\r\nexport default Meta;\r\n","import React from 'react';\r\nimport BasicSkeleton from './BasicSkeleton';\r\nimport SkeletonShimmer from './SkeletonShimmer';\r\n\r\nconst ProductSkeleton = () => {\r\n\treturn (\r\n\t\t<div className='skeleton-product-wrapper'>\r\n\t\t\t<BasicSkeleton type='box' />\r\n\t\t\t<BasicSkeleton type='text' />\r\n\t\t\t<BasicSkeleton type='text' />\r\n\t\t\t<SkeletonShimmer />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ProductSkeleton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Product from \"../components/Product\";\r\nimport Paginate from \"../components/Paginate\";\r\nimport { Row, Col, Container } from \"react-bootstrap\";\r\nimport ProductCarousel from \"../components/ProductCarousel\";\r\nimport Meta from \"../components/Meta\";\r\nimport { listProducts } from \"../actions/productActions\";\r\nimport { refreshLogin, getUserDetails } from \"../actions/userActions\";\r\nimport Message from \"../components/Message\";\r\nimport SearchBox from \"../components/SearchBox\";\r\nimport ProductSkeleton from \"../components/ProductSkeleton\";\r\nimport \"../styles/home.css\";\r\n\r\nconst HomePage = ({ match, history }) => {\r\n  const keyword = match.params.keyword; // to search for products\r\n  const pageNumber = Number(match.params.pageNumber) || 1; // current page number in the paginated display\r\n  const [promptVerfication, setPromptVerification] = useState(false); // prompt user to verify email if not yet confirmed\r\n  const [products, setProducts] = useState(null);\r\n  const [productAvailable, setProductAvailable] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  // get the products list, userinfo and user details form the redix store\r\n  const productList = useSelector((state) => state.productList);\r\n  let { loading, error, pages } = productList;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { error: userInfoError } = userDetails;\r\n\r\n  // fetch the user details\r\n  useEffect(() => {\r\n    userInfo\r\n      ? userInfo.isSocialLogin\r\n        ? dispatch(getUserDetails(userInfo.id))\r\n        : dispatch(getUserDetails(\"profile\"))\r\n      : dispatch(getUserDetails(\"profile\"));\r\n  }, [userInfo, dispatch]);\r\n\r\n  // refresh token to get new access token if error in user details\r\n  useEffect(() => {\r\n    if (userInfoError && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      dispatch(refreshLogin(user?.email));\r\n    }\r\n  }, [userInfoError, dispatch, userInfo]);\r\n\r\n  // set a state variable to true or false depending on if products is avialable in the state\r\n  useEffect(() => {\r\n    if (products) {\r\n      products.length ? setProductAvailable(true) : setProductAvailable(false);\r\n    }\r\n  }, [products]);\r\n\r\n  // fetch products from redux store into local state\r\n  useEffect(() => {\r\n    if (productList) {\r\n      if (productList.products) setProducts([...productList.products]);\r\n    }\r\n  }, [productList]);\r\n\r\n  // list products based on keyword and pagenumber\r\n  useEffect(() => {\r\n    dispatch(listProducts(keyword, pageNumber));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, keyword, pageNumber]);\r\n\r\n  // check if user needs to be promted about email verification on page load\r\n  useEffect(() => {\r\n    setPromptVerification(\r\n      localStorage.getItem(\"promptEmailVerfication\") === \"true\" ? true : false\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Meta />\r\n      {/* display carousel only on larger screens */}\r\n      {!keyword ? (\r\n        window.innerWidth > 430 && <ProductCarousel />\r\n      ) : (\r\n        <Link className=\"btn btn-outline btn-outline-primary my-2\" to=\"/\">\r\n          Go Back\r\n        </Link>\r\n      )}\r\n      {/* display this search bar on home page on mobile screens */}\r\n      <div className=\"d-block d-md-none\">\r\n        <SearchBox history={history} />\r\n      </div>\r\n\r\n      {/* if the user needs to be prompted about email verification, show this message */}\r\n      {promptVerfication ? (\r\n        <Message dismissible variant=\"info\" duration={10}>\r\n          Account Created! Please check your email to verify your account and\r\n          start shopping.\r\n        </Message>\r\n      ) : null}\r\n\r\n      <Container className=\"policy\">\r\n        <Row>\r\n          <Col className=\"col-lg-4\">\r\n            <img src=\"/images/f-delivery.png\" alt=\"\"></img>\r\n            <h4>Free shipping</h4>\r\n          </Col>\r\n          <Col className=\"col-lg-4\">\r\n            <img src=\"/images/coin.png\" alt=\"\"></img>\r\n            <h4>100% Money Back</h4>\r\n          </Col>\r\n          <Col className=\"col-lg-4\">\r\n            <img src=\"/images/chat.png\" alt=\"\"></img>\r\n            <h4>24 * 7 Online Support</h4>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n\r\n      {error ? (\r\n        <Message dismissible variant=\"danger\" duration={10}>\r\n          {error}\r\n        </Message>\r\n      ) : !loading && products ? (\r\n        <>\r\n          <Row>\r\n            {products.length\r\n              ? products.map((product) => {\r\n                  return (\r\n                    <Col sm={12} md={6} lg={4} xl={3} key={product._id}>\r\n                      <Product product={product} />\r\n                    </Col>\r\n                  );\r\n                })\r\n              : keyword &&\r\n                !productAvailable && (\r\n                  //   show this only if user has searched for some item and it is not available\r\n                  <Col className=\"text-center\">\r\n                    <div>\r\n                      <i className=\"far fa-frown\" /> No items found for this\r\n                      search query\r\n                    </div>\r\n                    Go Back to the <Link to=\"/\">Home Page</Link>\r\n                  </Col>\r\n                )}\r\n          </Row>\r\n          <Paginate\r\n            className=\"mt-auto text-center\"\r\n            page={pageNumber}\r\n            keyword={keyword ? keyword : \"\"}\r\n            pages={pages}\r\n          />\r\n        </>\r\n      ) : (\r\n        loading &&\r\n        products &&\r\n        products.length === 0 && (\r\n          <Row>\r\n            {[1, 2, 3, 4].map((ele) => {\r\n              return (\r\n                <Col sm={12} md={6} lg={4} xl={3} key={ele}>\r\n                  <div>\r\n                    <ProductSkeleton />\r\n                  </div>\r\n                </Col>\r\n              );\r\n            })}\r\n          </Row>\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React, { useState } from 'react';\r\nimport { Image } from 'react-bootstrap';\r\n\r\nconst ImageMagnifier = ({\r\n\tsrc,\r\n\talt,\r\n\ttitle,\r\n\twidth,\r\n\theight,\r\n\tmagnifierHeight = 200,\r\n\tmagnifieWidth = 200,\r\n\tzoomLevel = 1.5,\r\n}) => {\r\n\tconst [[x, y], setXY] = useState([0, 0]);\r\n\tconst [[imgWidth, imgHeight], setSize] = useState([0, 0]);\r\n\tconst [showMagnifier, setShowMagnifier] = useState(false);\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tposition: 'relative',\r\n\t\t\t\theight: height,\r\n\t\t\t\twidth: width,\r\n\t\t\t}}>\r\n\t\t\t<Image\r\n\t\t\t\tclassName='product-image'\r\n\t\t\t\tsrc={src}\r\n\t\t\t\tstyle={{ height: height, width: width }}\r\n\t\t\t\tfluid\r\n\t\t\t\ttitle={title}\r\n\t\t\t\tonMouseEnter={(e) => {\r\n\t\t\t\t\t// update image size and turn-on magnifier\r\n\t\t\t\t\tconst elem = e.currentTarget;\r\n\t\t\t\t\tconst { width, height } = elem.getBoundingClientRect();\r\n\t\t\t\t\tsetSize([width, height]);\r\n\t\t\t\t\tsetShowMagnifier(true);\r\n\t\t\t\t}}\r\n\t\t\t\tonMouseMove={(e) => {\r\n\t\t\t\t\t// update cursor position\r\n\t\t\t\t\tconst elem = e.currentTarget;\r\n\t\t\t\t\tconst { top, left } = elem.getBoundingClientRect();\r\n\r\n\t\t\t\t\t// calculate cursor position on the image\r\n\t\t\t\t\tconst x = e.pageX - left - window.pageXOffset;\r\n\t\t\t\t\tconst y = e.pageY - top - window.pageYOffset;\r\n\t\t\t\t\tsetXY([x, y]);\r\n\t\t\t\t}}\r\n\t\t\t\tonMouseLeave={() => {\r\n\t\t\t\t\t// close magnifier\r\n\t\t\t\t\tsetShowMagnifier(false);\r\n\t\t\t\t}}\r\n\t\t\t\talt={alt}\r\n\t\t\t/>\r\n\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: showMagnifier ? '' : 'none',\r\n\t\t\t\t\t// display: window.innerWidth <= 468 ? 'none' : '',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t// prevent maginier blocks the mousemove event of img\r\n\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\theight: `${magnifierHeight}px`,\r\n\t\t\t\t\twidth: `${magnifieWidth}px`,\r\n\t\t\t\t\t// move element center to cursor pos\r\n\t\t\t\t\ttop: `${y - magnifierHeight / 2.5}px`,\r\n\t\t\t\t\tleft: `${x - magnifieWidth / 2.5}px`,\r\n\t\t\t\t\topacity: '1', // reduce opacity so you can verify position\r\n\t\t\t\t\tborder: '1px solid lightgray',\r\n\t\t\t\t\tbackgroundColor: 'white',\r\n\t\t\t\t\tbackgroundImage: `url('${src}')`,\r\n\t\t\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\t\t\tborderRadius: '50%',\r\n\r\n\t\t\t\t\t//calculate zoomed image size\r\n\t\t\t\t\tbackgroundSize: `${imgWidth * zoomLevel}px ${\r\n\t\t\t\t\t\timgHeight * zoomLevel\r\n\t\t\t\t\t}px`,\r\n\r\n\t\t\t\t\t//calculete position of zoomed image.\r\n\t\t\t\t\tbackgroundPositionX: `${\r\n\t\t\t\t\t\t-x * zoomLevel + magnifieWidth / 2\r\n\t\t\t\t\t}px`,\r\n\t\t\t\t\tbackgroundPositionY: `${\r\n\t\t\t\t\t\t-y * zoomLevel + magnifierHeight / 2\r\n\t\t\t\t\t}px`,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ImageMagnifier;\r\n","import React from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport '../styles/loader.css';\r\n\r\nconst Loader = () => {\r\n\treturn (\r\n\t\t<Spinner\r\n\t\t\tanimation='border'\r\n\t\t\trole='status'\r\n\t\t\tvariant='primary'\r\n\t\t\tclassName='loader'\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default Loader;\r\n","import {\r\n\tORDER_CREATE_REQUEST,\r\n\tORDER_CREATE_SUCCESS,\r\n\tORDER_CREATE_FAILURE,\r\n\tORDER_DETAILS_REQUEST,\r\n\tORDER_DETAILS_SUCCESS,\r\n\tORDER_DETAILS_FAILURE,\r\n\tORDER_PAY_REQUEST,\r\n\tORDER_PAY_SUCCESS,\r\n\tORDER_PAY_FAILURE,\r\n\tORDER_DELIVER_REQUEST,\r\n\tORDER_DELIVER_SUCCESS,\r\n\tORDER_DELIVER_FAILURE,\r\n\tORDER_USER_LIST_REQUEST,\r\n\tORDER_USER_LIST_SUCCESS,\r\n\tORDER_USER_LIST_FAILURE,\r\n\tORDER_ALL_LIST_REQUEST,\r\n\tORDER_ALL_LIST_SUCCESS,\r\n\tORDER_ALL_LIST_FAILURE,\r\n} from '../constants/orderConstants';\r\n\r\nimport axios from 'axios';\r\n\r\n// get all the details about the order and dispatch only of currently logged in\r\nexport const createOrder = (order) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: ORDER_CREATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.post('/api/orders/', order, config);\r\n\r\n\t\tdispatch({ type: ORDER_CREATE_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ORDER_CREATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// get details about a particular order\r\nexport const getOrderDetails = (orderID) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: ORDER_DETAILS_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.get(`/api/orders/${orderID}`, config);\r\n\r\n\t\tdispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ORDER_DETAILS_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// update the current order to that of a paid one, and store the correct payment result\r\nexport const payOrder =\r\n\t(orderID, paymentResult) => async (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: ORDER_PAY_REQUEST });\r\n\r\n\t\t\tconst {\r\n\t\t\t\tuserLogin: { userInfo },\r\n\t\t\t} = getState();\r\n\r\n\t\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\r\n\t\t\tconst { data } = await axios.put(\r\n\t\t\t\t`/api/orders/${orderID}/pay`,\r\n\t\t\t\tpaymentResult,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: ORDER_PAY_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ORDER_PAY_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// Set the current order as delivered, only when logged in user is an admin\r\nexport const deliverOrder = (orderID) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: ORDER_DELIVER_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.put(\r\n\t\t\t`/api/orders/${orderID}/deliver`,\r\n\t\t\t{},\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: ORDER_DELIVER_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ORDER_DELIVER_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// list all the orders of a particular user\r\nexport const listMyOrders = () => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: ORDER_USER_LIST_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.get(`/api/orders/myorders`, config);\r\n\r\n\t\tdispatch({ type: ORDER_USER_LIST_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ORDER_USER_LIST_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// list all orders for the admin panel view, include the pagenumber being fetched\r\nexport const listAllOrders =\r\n\t(pageNumber = '') =>\r\n\tasync (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: ORDER_ALL_LIST_REQUEST });\r\n\r\n\t\t\tconst {\r\n\t\t\t\tuserLogin: { userInfo },\r\n\t\t\t} = getState();\r\n\r\n\t\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\r\n\t\t\tconst { data } = await axios.get(\r\n\t\t\t\t`/api/orders?pageNumber=${pageNumber}`,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: ORDER_ALL_LIST_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ORDER_ALL_LIST_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n","// there is a need to convert mongodb dates to readable date formats in various pages\r\n// this util function does that, and has a second argument to decide whether the time has to be included\r\nconst getDateString = (date, showTime = true) => {\r\n  const options = {\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  };\r\n  const timeStr = new Date(date).toLocaleTimeString(\"en\", {\r\n    timeStyle: \"short\",\r\n    hour12: true,\r\n    timeZone: \"America/New_York\",\r\n  });\r\n\r\n  let result = \"\";\r\n  if (showTime) result += `${timeStr} `;\r\n  return result + new Date(date).toLocaleDateString(\"en\", options);\r\n};\r\n\r\nexport default getDateString;\r\n","/* eslint-disable array-callback-return */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Card,\r\n  Button,\r\n  ListGroup,\r\n  Form,\r\n  FloatingLabel,\r\n} from \"react-bootstrap\";\r\nimport ImageMagnifier from \"../components/ImageMagnifier\"; // to magnify image on hover\r\nimport Rating from \"../components/Rating\";\r\nimport Meta from \"../components/Meta\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport {\r\n  listProductDetails,\r\n  createProductReview,\r\n} from \"../actions/productActions\";\r\nimport { listMyOrders } from \"../actions/orderActions\";\r\nimport { refreshLogin, getUserDetails } from \"../actions/userActions\";\r\nimport { PRODUCT_CREATE_REVIEW_RESET } from \"../constants/productConstants\";\r\nimport getDateString from \"../utils/getDateString\";\r\nimport \"../styles/product-page.css\";\r\n\r\nconst ProductPage = ({ history, match }) => {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [rating, setRating] = useState(0);\r\n  const [review, setReview] = useState(\"\");\r\n  const [allReviews, setAllReviews] = useState([]);\r\n  const [hasOrderedItem, setHasOrderedItem] = useState(false); // bool to check if the user has ordered this product\r\n  const [showReviewForm, setShowReviewForm] = useState(false); // bool to decide whether to show the review form or not\r\n  const dispatch = useDispatch();\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const productDetails = useSelector((state) => state.productDetails);\r\n  const { loading, product, error } = productDetails;\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { error: userLoginError } = userDetails;\r\n\r\n  const productCreateReview = useSelector((state) => state.productCreateReview);\r\n  const {\r\n    loading: loadingCreateReview,\r\n    success: successCreateReview,\r\n    error: errorCreateReview,\r\n  } = productCreateReview;\r\n\r\n  const orderListUser = useSelector((state) => state.orderListUser);\r\n  const { orders } = orderListUser;\r\n\r\n  // fetch user login info\r\n  useEffect(() => {\r\n    userInfo\r\n      ? userInfo.isSocialLogin\r\n        ? dispatch(getUserDetails(userInfo.id))\r\n        : dispatch(getUserDetails(\"profile\"))\r\n      : dispatch(getUserDetails(\"profile\"));\r\n  }, [userInfo, dispatch]);\r\n\r\n  // refresh the access tokens for accessing user details\r\n  useEffect(() => {\r\n    if (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [userLoginError, dispatch, userInfo]);\r\n\r\n  useEffect(() => {\r\n    dispatch(listMyOrders());\r\n  }, [dispatch]);\r\n\r\n  // add a new review, and reset the stored product review in the redux store\r\n  useEffect(() => {\r\n    if (successCreateReview) {\r\n      window.alert(\"Review Submitted!!\");\r\n      setRating(0);\r\n      setReview(\"\");\r\n      dispatch({ type: PRODUCT_CREATE_REVIEW_RESET });\r\n    }\r\n    dispatch(listProductDetails(match.params.id));\r\n  }, [match, dispatch, successCreateReview]);\r\n\r\n  useEffect(() => {\r\n    if (product && product.reviews && userInfo) {\r\n      let flag = 0; // to check if this user has already reviewed this product\r\n      for (let review of product.reviews) {\r\n        if (review.user === userInfo.id) {\r\n          flag = 1;\r\n          break;\r\n        }\r\n      }\r\n      flag ? setShowReviewForm(false) : setShowReviewForm(true);\r\n    } else {\r\n      setShowReviewForm(true);\r\n    }\r\n  }, [product, userInfo]);\r\n\r\n  useEffect(() => {\r\n    if (orders && orders.length) {\r\n      let flag = 0; // to check is this user has ordered this item\r\n      for (let obj of orders) {\r\n        for (let ele of obj.orderItems) {\r\n          if (ele.product.toString() === match.params.id) {\r\n            flag = 1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      flag ? setHasOrderedItem(true) : setHasOrderedItem(false);\r\n    } else {\r\n      setHasOrderedItem(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [orders]);\r\n\r\n  // arrange all reviews in reverse chronological order\r\n  useEffect(() => {\r\n    if (product && product.reviews) {\r\n      const sortedArr = product.reviews.sort(\r\n        (a, b) => new Date(b.createdAt) - new Date(a.createdAt)\r\n      );\r\n      setAllReviews(sortedArr);\r\n    }\r\n  }, [product]);\r\n\r\n  const handleAddToCart = (e) => {\r\n    history.push(`/cart/${match.params.id}?qty=${quantity}`);\r\n  };\r\n\r\n  const handleReviewSubmit = (e) => {\r\n    dispatch(\r\n      createProductReview(match.params.id, {\r\n        rating,\r\n        review,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Link className=\"btn btn-outline-primary my-2\" to=\"/\">\r\n        Go Back\r\n      </Link>\r\n      {product && (!product._id || product._id !== match.params.id) ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message dismissible variant=\"danger\" duration={10}>\r\n          {error}\r\n        </Message>\r\n      ) : product ? (\r\n        <>\r\n          <Meta title={`${product.name}`} />\r\n          <Row>\r\n            <Col md={6}>\r\n              <ImageMagnifier\r\n                src={product.image}\r\n                alt={product.name}\r\n                title={product.name}\r\n              />\r\n            </Col>\r\n            <Col md={3}>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h3>{product.name}</h3>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  {product && product.rating && (\r\n                    <Rating\r\n                      value={product.rating}\r\n                      text={`${product.numReviews} Review${\r\n                        product.numReviews > 1 ? \"s\" : \"\"\r\n                      }`}\r\n                    />\r\n                  )}\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <strong>Price: </strong>\r\n                  {product.price &&\r\n                    product.price.toLocaleString(\"en-US\", {\r\n                      maximumFractionDigits: 2,\r\n                      style: \"currency\",\r\n                      currency: \"USD\",\r\n                    })}\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <strong>Description:</strong> {product.description}\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Col>\r\n            <Col md={3}>\r\n              <Card>\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Price: </strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {product.price &&\r\n                          product.price.toLocaleString(\"en-US\", {\r\n                            maximumFractionDigits: 2,\r\n                            style: \"currency\",\r\n                            currency: \"USD\",\r\n                          })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Status: </strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {product.countInStock > 0 ? \"In Stock\" : \"Out of Stock\"}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  {product.countInStock > 0 && (\r\n                    <ListGroup.Item>\r\n                      <Row>\r\n                        <Col>\r\n                          <strong>Qty:</strong>\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            as=\"select\"\r\n                            value={quantity}\r\n                            onChange={(e) => setQuantity(e.target.value)}\r\n                          >\r\n                            {/* create as many options as the countInStock */}\r\n                            {[...Array(product.countInStock).keys()].map(\r\n                              (ele) => (\r\n                                <option key={ele + 1} value={ele + 1}>\r\n                                  {ele + 1}\r\n                                </option>\r\n                              )\r\n                            )}\r\n                          </Form.Control>\r\n                        </Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n                  )}\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Button\r\n                        onClick={handleAddToCart}\r\n                        type=\"button\"\r\n                        className=\"btn-block btn-lg\"\r\n                        disabled={product.countInStock <= 0}\r\n                      >\r\n                        Add To Cart\r\n                      </Button>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col md={6}>\r\n              <h2 className=\"mt-3\">Reviews</h2>\r\n              {(!product.reviews || !product.reviews.length) && (\r\n                <Message variant=\"secondary\">No Reviews Yet</Message>\r\n              )}\r\n              <ListGroup variant=\"flush\">\r\n                {/* {console.log(\r\n\t\t\t\t\t\t\t\t\tproduct.reviews.\r\n\t\t\t\t\t\t\t\t)} */}\r\n                {allReviews.map((item) => {\r\n                  return (\r\n                    <ListGroup.Item key={item._id}>\r\n                      <div>\r\n                        <img\r\n                          src={item.avatar}\r\n                          alt={item.name}\r\n                          className=\"review-avatar\"\r\n                        />\r\n                        <strong>{item.name}</strong>\r\n                      </div>\r\n                      <Rating value={item.rating} />\r\n                      <p\r\n                        style={{\r\n                          margin: \"0\",\r\n                          fontSize: \"1.1em\",\r\n                        }}\r\n                      >\r\n                        {item.review}\r\n                      </p>\r\n                      <small\r\n                        style={{\r\n                          fontSize: \"0.9em\",\r\n                        }}\r\n                      >\r\n                        {getDateString(item.createdAt, false)}\r\n                      </small>\r\n                    </ListGroup.Item>\r\n                  );\r\n                })}\r\n                {hasOrderedItem && !showReviewForm && (\r\n                  <Message dismissible>\r\n                    You have already reviewed this product\r\n                  </Message>\r\n                )}\r\n                {hasOrderedItem && showReviewForm && (\r\n                  <>\r\n                    <h2>Write a Customer Review</h2>\r\n                    {errorCreateReview && (\r\n                      <Message dismissible variant=\"info\" duration={10}>\r\n                        {errorCreateReview}\r\n                      </Message>\r\n                    )}\r\n                    {loadingCreateReview && <Loader />}\r\n                    <Form onSubmit={handleReviewSubmit}>\r\n                      <Form.Group controlId=\"rating\">\r\n                        <Form.Control\r\n                          as=\"select\"\r\n                          value={rating}\r\n                          onChange={(e) => setRating(e.target.value)}\r\n                        >\r\n                          <option default>Choose Rating</option>\r\n                          <option value=\"1\">1 - Bad</option>\r\n                          <option value=\"2\">2 - Poor</option>\r\n                          <option value=\"3\">3 - Fair</option>\r\n                          <option value=\"4\">4 - Good</option>\r\n                          <option value=\"5\">5 - Excellent</option>\r\n                        </Form.Control>\r\n                      </Form.Group>\r\n                      <Form.Group controlId=\"comment\">\r\n                        <FloatingLabel\r\n                          controlId=\"commenttext\"\r\n                          label=\"Comment\"\r\n                          className=\"my-3\"\r\n                        >\r\n                          <Form.Control\r\n                            as=\"textarea\"\r\n                            placeholder=\"Leave a comment here\"\r\n                            row=\"3\"\r\n                            onChange={(e) => setReview(e.target.value)}\r\n                            value={review}\r\n                          />\r\n                        </FloatingLabel>\r\n                      </Form.Group>\r\n                      <div className=\"d-grid\">\r\n                        <Button type=\"submit\">Submit Review</Button>\r\n                      </div>\r\n                    </Form>\r\n                  </>\r\n                )}\r\n              </ListGroup>\r\n            </Col>\r\n          </Row>\r\n        </>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductPage;\r\n","export const CART_ADD_ITEM = 'CART_ADD_ITEM';\r\nexport const CART_REMOVE_ITEM = 'CART_REMOVE_ITEM';\r\nexport const CART_RESET = 'CART_RESET';\r\nexport const CART_SAVE_SHIPPING_ADDRESS = 'CART_SAVE_SHIPPING_ADDRESS';\r\nexport const CART_SAVE_PAYMENT_METHOD = 'CART_SAVE_PAYMENT_METHOD';\r\n","import axios from 'axios';\r\nimport {\r\n\tCART_ADD_ITEM,\r\n\tCART_REMOVE_ITEM,\r\n\tCART_SAVE_SHIPPING_ADDRESS,\r\n\tCART_SAVE_PAYMENT_METHOD,\r\n} from '../constants/cartConstants';\r\n\r\n// get the product id and the quantity of the item to add to the cart\r\nexport const addItem = (id, qty) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tconst { data } = await axios.get(`/api/products/${id}`);\r\n\t\tdispatch({\r\n\t\t\ttype: CART_ADD_ITEM,\r\n\t\t\tpayload: {\r\n\t\t\t\tproduct: data._id,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\timage: data.image,\r\n\t\t\t\tprice: data.price,\r\n\t\t\t\tcountInStock: data.countInStock,\r\n\t\t\t\tqty,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t// update the local storage with the new cart\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'cartItems',\r\n\t\t\tJSON.stringify(getState().cart.cartItems)\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.error(error);\r\n\t}\r\n};\r\n\r\n// get the product id to be removed from the cart\r\nexport const removeItem = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_REMOVE_ITEM,\r\n\t\t\tpayload: id,\r\n\t\t});\r\n\t\t// update the local storage with the updated cart\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'cartItems',\r\n\t\t\tJSON.stringify(getState().cart.cartItems)\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\n// get the shipping address data and dispatch corresponding action\r\nexport const saveShippingAddress = (data) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_SAVE_SHIPPING_ADDRESS,\r\n\t\t\tpayload: data,\r\n\t\t});\r\n\t\tlocalStorage.setItem('shippingAddress', JSON.stringify(data));\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\n// get the option for payment and update the local storage as well\r\nexport const savePaymentMethod = (data) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_SAVE_PAYMENT_METHOD,\r\n\t\t\tpayload: data,\r\n\t\t});\r\n\t\tlocalStorage.setItem('paymentMethod', JSON.stringify(data));\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Image,\r\n  ButtonGroup,\r\n  ListGroup,\r\n  Button,\r\n  Card,\r\n} from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Meta from \"../components/Meta\";\r\nimport Message from \"../components/Message\";\r\nimport { refreshLogin, getUserDetails } from \"../actions/userActions\";\r\nimport { addItem, removeItem } from \"../actions/cartActions\";\r\n\r\nconst CartPage = ({ match, location, history }) => {\r\n  const [totalItems, setTotalItems] = useState(0);\r\n  const productID = match.params.id;\r\n  const qty = location.search ? Number(location.search.split(\"=\")[1]) : 1; // fetch from the query string\r\n  const dispatch = useDispatch();\r\n\r\n  // get cart, userInfo and userdetails from redux store\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems } = cart;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { error } = userDetails;\r\n\r\n  // get user details depending on what type of login it is, dispatch with correspnding argument\r\n  useEffect(() => {\r\n    userInfo\r\n      ? userInfo.isSocialLogin\r\n        ? dispatch(getUserDetails(userInfo.id))\r\n        : dispatch(getUserDetails(\"profile\"))\r\n      : dispatch(getUserDetails(\"profile\"));\r\n  }, [userInfo, dispatch]);\r\n\r\n  // store total items to local state\r\n  useEffect(() => {\r\n    if (cartItems) {\r\n      setTotalItems(cartItems.reduce((acc, item) => acc + item.qty, 0));\r\n    }\r\n  }, [cartItems]);\r\n\r\n  // if userdetails shows error, then use refresh token to get new access tokens\r\n  useEffect(() => {\r\n    if (error && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [error, dispatch, userInfo]);\r\n\r\n  // add item to cart\r\n  useEffect(() => {\r\n    if (productID) {\r\n      dispatch(addItem(productID, qty));\r\n    }\r\n  }, [dispatch, productID, qty]);\r\n\r\n  // remove item from cart\r\n  const handleRemoveFromCart = (id) => {\r\n    dispatch(removeItem(id));\r\n  };\r\n\r\n  // proceed to shipping address page, which is the next step in placing an order\r\n  const handleCheckout = (e) => {\r\n    history.push(\"/login?redirect=shipping\");\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Meta title=\"My Cart | The Style Studio\" />\r\n      <Col md={8}>\r\n        <h1>Shopping Cart</h1>\r\n        {!cartItems.length ? (\r\n          <Message>\r\n            Your Cart is empty. <Link to=\"/\">Go Back.</Link>{\" \"}\r\n          </Message>\r\n        ) : (\r\n          <ListGroup variant=\"flush\">\r\n            {cartItems.map((item) => (\r\n              <ListGroup.Item key={item.product}>\r\n                <Row\r\n                  style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <Col md={2}>\r\n                    <Image\r\n                      className=\"product-image\"\r\n                      src={item.image}\r\n                      alt={item.name}\r\n                      fluid\r\n                      rounded\r\n                    />\r\n                  </Col>\r\n                  <Col md={4}>\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </Col>\r\n                  <Col\r\n                    md={3}\r\n                    className=\"d-none d-md-flex\"\r\n                    style={{\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"space-evenly\",\r\n                    }}\r\n                  >\r\n                    {item.price.toLocaleString(\"en-US\", {\r\n                      maximumFractionDigits: 2,\r\n                      style: \"currency\",\r\n                      currency: \"USD\",\r\n                    })}\r\n\r\n                    <div>\r\n                      <i\r\n                        style={{ fontSize: \"0.7em\" }}\r\n                        className=\"fas fa-times\"\r\n                      />{\" \"}\r\n                      {item.qty}\r\n                    </div>\r\n                  </Col>\r\n                  {/* display this col only for larger screens */}\r\n                  <Col\r\n                    md={3}\r\n                    className=\"d-none d-md-flex\"\r\n                    style={{\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"space-between\",\r\n                    }}\r\n                  >\r\n                    <ButtonGroup aria-label=\"Addtocart\">\r\n                      <Button\r\n                        style={{\r\n                          outline: \"none\",\r\n                          borderRight: \"1px solid white\",\r\n                        }}\r\n                        disabled={item.qty >= item.countInStock}\r\n                        onClick={() => {\r\n                          dispatch(addItem(item.product, Number(item.qty + 1)));\r\n                        }}\r\n                        variant=\"primary\"\r\n                      >\r\n                        <i className=\"fas fa-plus\" />\r\n                      </Button>\r\n                      <Button\r\n                        style={{\r\n                          outline: \"none\",\r\n                          borderLeft: \"1px solid white\",\r\n                        }}\r\n                        variant=\"primary\"\r\n                        disabled={item.qty === 1}\r\n                        onClick={() => {\r\n                          dispatch(addItem(item.product, Number(item.qty - 1)));\r\n                        }}\r\n                      >\r\n                        <i className=\"fas fa-minus\" />\r\n                      </Button>\r\n                    </ButtonGroup>\r\n                    <Button\r\n                      type=\"button\"\r\n                      onClick={() => handleRemoveFromCart(item.product)}\r\n                    >\r\n                      <i className=\"fas fa-trash\" />\r\n                    </Button>\r\n                  </Col>\r\n                  {/* display this col only on mobile screens */}\r\n                  <Col\r\n                    className=\"d-flex d-md-none mt-2\"\r\n                    style={{\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"space-between\",\r\n                    }}\r\n                  >\r\n                    <div\r\n                      className=\"d-flex\"\r\n                      style={{\r\n                        fontSize: \"1.2em\",\r\n                        width: \"50%\",\r\n                      }}\r\n                    >\r\n                      {item.price.toLocaleString(\"en-US\", {\r\n                        maximumFractionDigits: 2,\r\n                        style: \"currency\",\r\n                        currency: \"USD\",\r\n                      })}\r\n\r\n                      <div className=\"ms-1\">\r\n                        <i\r\n                          style={{\r\n                            fontSize: \"0.7em\",\r\n                          }}\r\n                          className=\"fas fa-times\"\r\n                        />{\" \"}\r\n                        {item.qty}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div\r\n                      className=\"d-flex\"\r\n                      style={{\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"space-between\",\r\n                        width: \"50%\",\r\n                      }}\r\n                    >\r\n                      <Button\r\n                        type=\"button\"\r\n                        onClick={() => handleRemoveFromCart(item.product)}\r\n                      >\r\n                        <i className=\"fas fa-trash\" />\r\n                      </Button>\r\n                      <Button\r\n                        style={{\r\n                          outline: \"none\",\r\n                          borderRight: \"1px solid white\",\r\n                        }}\r\n                        disabled={item.qty >= item.countInStock}\r\n                        onClick={() => {\r\n                          dispatch(addItem(item.product, Number(item.qty + 1)));\r\n                        }}\r\n                        variant=\"primary\"\r\n                      >\r\n                        <i className=\"fas fa-plus\" />\r\n                      </Button>\r\n                      <Button\r\n                        style={{\r\n                          outline: \"none\",\r\n                          borderLeft: \"1px solid white\",\r\n                        }}\r\n                        variant=\"primary\"\r\n                        disabled={item.qty === 1}\r\n                        onClick={() => {\r\n                          dispatch(addItem(item.product, Number(item.qty - 1)));\r\n                        }}\r\n                      >\r\n                        <i className=\"fas fa-minus\" />\r\n                      </Button>\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        )}\r\n      </Col>\r\n      <Col md={4} className=\"mt-3\">\r\n        <ListGroup>\r\n          <Card variant=\"flush\">\r\n            <ListGroup.Item>\r\n              <h2 className=\"text-center\">\r\n                Subtotal ({totalItems}) Item\r\n                {totalItems > 1 && \"s\"}\r\n              </h2>\r\n              <strong>\r\n                {cartItems\r\n                  .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                  .toLocaleString(\"en-US\", {\r\n                    maximumFractionDigits: 2,\r\n                    style: \"currency\",\r\n                    currency: \"USD\",\r\n                  })}\r\n              </strong>\r\n            </ListGroup.Item>\r\n            <ListGroup.Item>\r\n              <div className=\"d-grid\">\r\n                <Button\r\n                  type=\"button\"\r\n                  size=\"lg\"\r\n                  disabled={!cartItems.length}\r\n                  onClick={handleCheckout}\r\n                >\r\n                  Proceed to checkout\r\n                </Button>\r\n              </div>\r\n            </ListGroup.Item>\r\n          </Card>\r\n        </ListGroup>\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default CartPage;\r\n","import React from 'react';\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\n\r\nconst FormContainer = ({ children }) => {\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Row className='justify-content-md-center'>\r\n\t\t\t\t<Col xs={12} md={6}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default FormContainer;\r\n","export default __webpack_public_path__ + \"static/media/googleLogo.0590aaf0.png\";","import React from \"react\";\r\nimport { Card, Image } from \"react-bootstrap\";\r\nimport googleLogo from \"../assets/googleLogo.png\";\r\nimport githubLogo from \"../assets/githubLogo.png\";\r\nimport twitterLogo from \"../assets/twitterLogo.png\";\r\nimport linkedinLogo from \"../assets/linkedinLogo.png\";\r\nimport \"../styles/social-login-option.css\";\r\n\r\nconst SocialLoginOptions = () => {\r\n  const baseURL = process.env.REACT_APP_BASE_URL;\r\n  // display a list of 4 options and make API request to passport login on click\r\n  return (\r\n    <div\r\n      id=\"social-login\"\r\n      style={{\r\n        margin: \"1em 0\",\r\n        padding: \"0\",\r\n      }}\r\n    >\r\n      <div className=\"social-login-container\">\r\n        <div className=\"social-login-line\" />\r\n        <p className=\"social-login-content\">Or Connect With</p>\r\n        <div className=\"social-login-line\" />\r\n      </div>\r\n      <Card.Body\r\n        style={{\r\n          margin: \"0\",\r\n          padding: \"0\",\r\n          display: \"flex\",\r\n          fleFlow: \"row wrap\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"space-around\",\r\n        }}\r\n      >\r\n        <a href={`${baseURL}api/auth/google`}>\r\n          <Image\r\n            rounded\r\n            style={{\r\n              width: \"2.5em\",\r\n              height: \"2.5em\",\r\n              objectFit: \"cover\",\r\n            }}\r\n            src={googleLogo}\r\n          />\r\n        </a>\r\n        <a href={`${baseURL}api/auth/linkedin`}>\r\n          <Image\r\n            rounded\r\n            style={{\r\n              width: \"2.5em\",\r\n              height: \"2.5em\",\r\n              objectFit: \"contain\",\r\n            }}\r\n            src={linkedinLogo}\r\n          />\r\n        </a>\r\n      </Card.Body>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SocialLoginOptions;\r\n","export default __webpack_public_path__ + \"static/media/twitterLogo.f963dcac.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAABKNAAASjQEphQ1dAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAvFQTFRF////AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3dPNe8AAAAPp0Uk5TAAECAwQFBgcICQoLDA0ODxAREhMU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\"","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tForm,\r\n\tButton,\r\n\tInputGroup,\r\n\tCol,\r\n\tCard,\r\n\tFloatingLabel,\r\n} from 'react-bootstrap';\r\nimport { loginUser } from '../actions/userActions';\r\nimport { USER_LOGIN_SUCCESS } from '../constants/userConstants';\r\nimport axios from 'axios';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport FormContainer from '../components/FormContainer';\r\nimport SocialLoginOptions from '../components/SocialLoginOptions';\r\nimport '../styles/login-register.css';\r\n\r\nconst LoginPage = ({ location, history }) => {\r\n\tconst [authFailedMsg, setAuthFailedMsg] = useState(''); // if user tried to login with different social account after registering with some other social account\r\n\tconst [showRedirectMsg, setShowRedirectMsg] = useState(false);\r\n\tconst [forgotPassword, setForgotPassword] = useState(false);\r\n\tconst [showLoading, setShowLoading] = useState(false); // to display loader after user submits the email to reset password\r\n\tconst [emailSent, setEmailSent] = useState(false); //to display a message that email is sent to reset password\r\n\r\n\tconst [type, setType] = useState('password');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\tconst redirect = location.search ? location.search.split('=')[1] : '';\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { loading, userInfo, error } = userLogin;\r\n\tconst storedInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!location.search.includes('success') && userInfo)\r\n\t\t\thistory.push(redirect);\r\n\t}, [history, redirect, location, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (location.search.includes('login=failed')) {\r\n\t\t\tconst errorCodeQuery = location.search.split('&')[1];\r\n\t\t\tconst errorCode = errorCodeQuery.split('=')[1];\r\n\t\t\tswitch (errorCode) {\r\n\t\t\t\tcase '0':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Google Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '1':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Github Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '2':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Twitter Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '3':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a LinkedIn Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [location.search]);\r\n\r\n\t// if redirected to login page after refresh token expired, show a message\r\n\tuseEffect(() => {\r\n\t\tconst flag = localStorage.getItem('redirectLogin');\r\n\t\tif (flag && flag === 'true') {\r\n\t\t\tsetShowRedirectMsg(true);\r\n\t\t} else {\r\n\t\t\tsetShowRedirectMsg(false);\r\n\t\t}\r\n\t}, []);\r\n\r\n\t// if the passport social login is successful, get the user's data and store in redux store\r\n\tuseEffect(() => {\r\n\t\t// check for url params\r\n\t\tif (window.location.search.includes('success')) {\r\n\t\t\tconst queries = window.location.search.split('&');\r\n\t\t\tconst isSuccess = queries[0].split('=')[1] === 'success';\r\n\t\t\tconst id = queries[1].split('=')[1];\r\n\r\n\t\t\t// if successful login\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t// get user data and dispatch login success\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('/api/users/passport/data', {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tisAdmin,\r\n\t\t\t\t\t\t\tisConfirmed,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t} = data;\r\n\t\t\t\t\t\tconst userData = {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tisAdmin,\r\n\t\t\t\t\t\t\tisConfirmed,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t\tisSocialLogin: true,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// login user in frontend\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\t\t\t\t\tpayload: userData,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// update the local storage\r\n\t\t\t\t\t\tlocalStorage.setItem(\r\n\t\t\t\t\t\t\t'userInfo',\r\n\t\t\t\t\t\t\tJSON.stringify(userData)\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// remove variable that was meant to promt email verification if it is a social login\r\n\t\t\t\t\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t\t\t\t\t\thistory.push('/shipping'); // move to shipping page by default\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}, [dispatch, history, redirect]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// if redirected from confirmation page, fill email and let user fill the password field\r\n\t\tif (\r\n\t\t\tstoredInfo &&\r\n\t\t\tstoredInfo.email &&\r\n\t\t\tlocalStorage.getItem('fillEmailOnLoginPage') === 'true'\r\n\t\t) {\r\n\t\t\tlocalStorage.removeItem('fillEmailOnLoginPage');\r\n\t\t\tsetEmail(storedInfo.email);\r\n\t\t}\r\n\t}, [storedInfo]);\r\n\r\n\t// to show/hide the password field content\r\n\tconst showHide = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetType(type === 'password' ? 'text' : 'password');\r\n\t};\r\n\r\n\t// login user from email and password\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(loginUser(email, password));\r\n\t};\r\n\r\n\t// to send a mail for resetting password if forgotted\r\n\tconst handleEmailSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetShowLoading(true);\r\n\r\n\t\t// send the mail to the registered user\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/reset',\r\n\t\t\t{ email },\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tif (data) {\r\n\t\t\tsetShowLoading(false);\r\n\t\t\tsetEmailSent(true);\r\n\t\t\t// store the name in localstorage\r\n\t\t\tlocalStorage.setItem('EcommerceUserName', data.name); // store the user name, so that we can use it in the profile page to ask them to confirm email\r\n\t\t}\r\n\t};\r\n\r\n\t// there are 2 sorts of forms to be shown, one when resetting password, and other when normal login\r\n\tif (!forgotPassword) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContainer>\r\n\t\t\t\t\t{/* if passport login has failed because user logged in with differrent social account, shoe the error msg */}\r\n\t\t\t\t\t{authFailedMsg && (\r\n\t\t\t\t\t\t<Message variant='danger' dismissible>\r\n\t\t\t\t\t\t\t{authFailedMsg}\r\n\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\t\t\tboxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tSign In\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h1 onClick={() => history.push('/register')}>\r\n\t\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{/* the message when refresh token has expired */}\r\n\t\t\t\t\t\t{showRedirectMsg && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='info' duration={10}>\r\n\t\t\t\t\t\t\t\tYour session has expired. Please login again.\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\r\n\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Email address'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={showHide}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{type === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(true)\r\n\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\tForgot Password?\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContainer>\r\n\t\t\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\t\t\tboxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tcursor: 'default',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tReset Password\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{showLoading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : emailSent ? (\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<Card.Body className='pl-0'>\r\n\t\t\t\t\t\t\t\t\t<Card.Title>Email Sent</Card.Title>\r\n\t\t\t\t\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t\t\t\t\tPlease use the link sent to your email\r\n\t\t\t\t\t\t\t\t\t\tand reset your password right away!\r\n\t\t\t\t\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={handleEmailSubmit}>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Email address'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\tclassName='remember-password'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(false)\r\n\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\tI remember my password\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default LoginPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tForm,\r\n\tButton,\r\n\tInputGroup,\r\n\tFloatingLabel,\r\n\tRow,\r\n\tCol,\r\n} from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport FormContainer from '../components/FormContainer';\r\nimport { registerUser } from '../actions/userActions';\r\nimport '../styles/login-register.css';\r\n\r\nconst RegisterPage = ({ location, history }) => {\r\n\tconst [typePassword, setTypePassword] = useState('password');\r\n\tconst [typeConfirmPassword, setTypeConfirmPassword] = useState('password');\r\n\r\n\tconst [name, setName] = useState('');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [confirmPassword, setConfirmPassword] = useState('');\r\n\tconst [message, setMessage] = useState(null);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst redirect = location.search ? location.search.split('=')[1] : '';\r\n\tconst userRegister = useSelector((state) => state.userRegister);\r\n\tconst { loading, userInfo, error } = userRegister;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInfo) {\r\n\t\t\tlocalStorage.setItem('promptEmailVerfication', 'true');\r\n\t\t\thistory.push(redirect);\r\n\t\t}\r\n\t}, [history, redirect, userInfo]);\r\n\r\n\tconst showHidePassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypePassword(typePassword === 'password' ? 'text' : 'password');\r\n\t};\r\n\tconst showHideConfirmPassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypeConfirmPassword(\r\n\t\t\ttypeConfirmPassword === 'password' ? 'text' : 'password'\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (password !== confirmPassword) {\r\n\t\t\tsetMessage('Passwords do not match. Please retry.');\r\n\t\t} else {\r\n\t\t\tdispatch(registerUser(name, email, password));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t<h1 onClick={() => history.push('/login')}>Sign In</h1>\r\n\t\t\t\t\t<h1\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\tboxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\tMozBoxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={() => history.push('/register')}>\r\n\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t{message && (\r\n\t\t\t\t\t<Message dismissible variant='warning' duration={10}>\r\n\t\t\t\t\t\t{message}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t)}\r\n\t\t\t\t{error && (\r\n\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t)}\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t<Form.Group controlId='name' className='mb-2'>\r\n\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\tcontrolId='nameinput'\r\n\t\t\t\t\t\t\t\tlabel='Name'\r\n\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Enter Name'\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group controlId='email' className='my-2'>\r\n\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\tlabel='Email Address'\r\n\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\ttype={typePassword}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetPassword(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={showHidePassword}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft: '-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t{typePassword === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\tcontrolId='confirmpasswordinput'\r\n\t\t\t\t\t\t\t\t\tlabel='Confirm password'\r\n\t\t\t\t\t\t\t\t\tstyle={{ display: 'flex', width: '100%' }}\r\n\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\ttype={typeConfirmPassword}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Confirm your password'\r\n\t\t\t\t\t\t\t\t\t\tvalue={confirmPassword}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetConfirmPassword(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={showHideConfirmPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft: '-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t{typeConfirmPassword === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tRegister\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default RegisterPage;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Form,\r\n  Button,\r\n  Row,\r\n  InputGroup,\r\n  Col,\r\n  Card,\r\n  Table,\r\n  Image,\r\n  FloatingLabel,\r\n} from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport {\r\n  sendVerficationEmail,\r\n  getUserDetails,\r\n  updateUserProfile,\r\n  refreshLogin,\r\n} from \"../actions/userActions\";\r\nimport { listMyOrders } from \"../actions/orderActions\";\r\nimport { USER_PROFILE_UPDATE_RESET } from \"../constants/userConstants\";\r\nimport Meta from \"../components/Meta\";\r\nimport axios from \"axios\";\r\nimport getDateString from \"../utils/getDateString\";\r\nimport \"../styles/profile-page.css\";\r\n\r\nconst ProfilePage = ({ history }) => {\r\n  const inputFile = useRef(null);\r\n  const [showSubmitButton, setShowSubmitButton] = useState(false); // sisable the submit button unless some user detail is changed by user\r\n  const [typePassword, setTypePassword] = useState(\"password\");\r\n  const [typeConfirmPassword, setTypeConfirmPassword] = useState(\"password\");\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [avatar, setAvatar] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(null);\r\n  const [allOrders, setAllOrders] = useState([]);\r\n\r\n  const [uploading, setUploading] = useState(false);\r\n  const [errorImageUpload, setErrorImageUpload] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { loading, user, error } = userDetails;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const userProfileUpdate = useSelector((state) => state.userProfileUpdate);\r\n  const { success } = userProfileUpdate;\r\n\r\n  const orderListUser = useSelector((state) => state.orderListUser);\r\n  const {\r\n    loading: loadingOrdersList,\r\n    orders,\r\n    error: errorOrdersList,\r\n  } = orderListUser;\r\n\r\n  // check whether verification email has to be sent\r\n  const userSendEmailVerfication = useSelector(\r\n    (state) => state.userSendEmailVerfication\r\n  );\r\n  const { emailSent, hasError } = userSendEmailVerfication;\r\n\r\n  // refresh access token for user details error\r\n  useEffect(() => {\r\n    if (error && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [error, dispatch, userInfo]);\r\n\r\n  // set orders to local state\r\n  useEffect(() => {\r\n    if (orders && orders.length) {\r\n      setAllOrders([...orders]);\r\n    }\r\n  }, [orders]);\r\n\r\n  // check if any of the input fields value is changed, only then show the submit button\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      if (name && userInfo.name !== name) setShowSubmitButton(true);\r\n      else if (email && userInfo.email !== email) setShowSubmitButton(true);\r\n      else if (password || confirmPassword) setShowSubmitButton(true);\r\n      else setShowSubmitButton(false);\r\n    }\r\n  }, [name, email, password, confirmPassword, userInfo]);\r\n\r\n  useEffect(() => {\r\n    dispatch(listMyOrders());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (!userInfo) {\r\n      history.push(\"/login\");\r\n    } else {\r\n      // if user is null, first fetch it and then set its details to the local state\r\n      if (!user || !user.name || success) {\r\n        dispatch(listMyOrders());\r\n        dispatch({ type: USER_PROFILE_UPDATE_RESET });\r\n        userInfo\r\n          ? userInfo.isSocialLogin\r\n            ? dispatch(getUserDetails(userInfo.id))\r\n            : dispatch(getUserDetails(\"profile\"))\r\n          : dispatch(getUserDetails(\"profile\"));\r\n        if (success) {\r\n          userInfo.isSocialLogin\r\n            ? dispatch(getUserDetails(userInfo.id))\r\n            : dispatch(getUserDetails(\"profile\"));\r\n        }\r\n      } else {\r\n        setName(user.name);\r\n        setEmail(user.email);\r\n        setAvatar(user.avatar);\r\n      }\r\n    }\r\n  }, [history, userInfo, user, dispatch, success, loadingOrdersList]);\r\n\r\n  const showHidePassword = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setTypePassword(typePassword === \"password\" ? \"text\" : \"password\");\r\n  };\r\n\r\n  const showHideConfirmPassword = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setTypeConfirmPassword(\r\n      typeConfirmPassword === \"password\" ? \"text\" : \"password\"\r\n    );\r\n  };\r\n\r\n  // handle file upload to aws bucket\r\n  const handleImageUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n    setUploading(true);\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\"/api/upload\", formData, config);\r\n      setAvatar(data);\r\n      dispatch(\r\n        updateUserProfile({\r\n          id: user.id,\r\n          avatar: data,\r\n        })\r\n      );\r\n      setUploading(false);\r\n    } catch (error) {\r\n      setErrorImageUpload(\"Please choose a valid image\");\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  // handle image overlay div's click to upload new file\r\n  const handleImageClick = () => {\r\n    inputFile.current.click();\r\n  };\r\n\r\n  // update user details\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (password !== confirmPassword) {\r\n      setMessage(\"Passwords do not match. Please retry.\");\r\n    } else {\r\n      dispatch(\r\n        updateUserProfile({\r\n          id: user.id,\r\n          name,\r\n          email,\r\n          avatar,\r\n          password,\r\n          confirmPassword,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Row className=\"mt-2\">\r\n      <Meta title=\"My Profile | The Style Studio\" />\r\n      {userInfo && !userInfo.isConfirmed ? (\r\n        <>\r\n          {emailSent && (\r\n            <Message variant=\"success\" dismissible>\r\n              A verification link has been sent your mail!\r\n            </Message>\r\n          )}\r\n          {hasError && (\r\n            <Message dismissible variant=\"danger\">\r\n              {hasError}\r\n            </Message>\r\n          )}\r\n          <Card style={{ margin: \"0\" }} className=\"mb-3\">\r\n            <Card.Body className=\"ps-0 \">\r\n              <Card.Title style={{ fontWeight: \"bold\" }}>\r\n                Account Not Verified\r\n              </Card.Title>\r\n              <Card.Text>\r\n                {`${userInfo.name}, `} your account is not yet verfied. Please{\" \"}\r\n                <Button\r\n                  variant=\"link\"\r\n                  className=\"p-0\"\r\n                  style={{\r\n                    fontSize: \"0.9em\",\r\n                    margin: \"0 0 0.1em 0\",\r\n                    focus: \"none\",\r\n                  }}\r\n                  onClick={() => dispatch(sendVerficationEmail(userInfo.email))}\r\n                >\r\n                  click here\r\n                </Button>{\" \"}\r\n                to send a verfication email.\r\n              </Card.Text>\r\n            </Card.Body>\r\n          </Card>\r\n        </>\r\n      ) : null}\r\n      <Col\r\n        md={3}\r\n        style={\r\n          userInfo && !userInfo.isConfirmed\r\n            ? {\r\n                opacity: \"0.5\",\r\n                pointerEvents: \"none\",\r\n              }\r\n            : {\r\n                opacity: \"1\",\r\n                pointerEvents: \"\",\r\n              }\r\n        }\r\n      >\r\n        <h2 className=\"text-center\">My Profile</h2>\r\n        {message && (\r\n          <Message dismissible variant=\"warning\" duration={8}>\r\n            {message}\r\n          </Message>\r\n        )}\r\n        {error && error !== \"Not authorised. Token failed\" && (\r\n          <Message dismissible variant=\"danger\" duration={10}>\r\n            {error}\r\n          </Message>\r\n        )}\r\n        {success && (\r\n          <Message dismissible variant=\"success\" duration={8}>\r\n            Profile Updated!\r\n          </Message>\r\n        )}\r\n        {loading ? (\r\n          <Loader />\r\n        ) : (\r\n          <div style={{ display: \"flex\", flexFlow: \"column nowrap\" }}>\r\n            {errorImageUpload && (\r\n              <Message dismissible variant=\"danger\" duration={10}>\r\n                {errorImageUpload}\r\n              </Message>\r\n            )}\r\n            {uploading ? (\r\n              <Loader />\r\n            ) : (\r\n              <div\r\n                className=\"profile-page-image\"\r\n                style={{ alignSelf: \"center\" }}\r\n              >\r\n                <Image\r\n                  src={avatar}\r\n                  alt={name}\r\n                  style={{\r\n                    height: \"5em\",\r\n                    width: \"5em\",\r\n                    marginBottom: \"1em\",\r\n                    border: \"1px solid #ced4da\",\r\n                    borderRadius: \"50%\",\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                />\r\n                <div className=\"image-overlay\" onClick={handleImageClick}>\r\n                  Click to upload image\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* for image upload */}\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              id=\"file\"\r\n              ref={inputFile}\r\n              onChange={handleImageUpload}\r\n              style={{ display: \"none\" }}\r\n            />\r\n            <Form onSubmit={handleSubmit}>\r\n              <Form.Group controlId=\"name\">\r\n                <FloatingLabel\r\n                  controlId=\"nameinput\"\r\n                  label=\"Name\"\r\n                  className=\"mb-3\"\r\n                >\r\n                  <Form.Control\r\n                    size=\"lg\"\r\n                    placeholder=\"Enter Name\"\r\n                    type=\"text\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                  />\r\n                </FloatingLabel>\r\n              </Form.Group>\r\n              <Form.Group\r\n                controlId=\"email\"\r\n                className=\"my-2\"\r\n                style={\r\n                  userInfo && userInfo.isSocialLogin\r\n                    ? {\r\n                        pointerEvents: \"none\",\r\n                        opacity: \"0.8\",\r\n                      }\r\n                    : {}\r\n                }\r\n              >\r\n                <FloatingLabel\r\n                  controlId=\"emailinput\"\r\n                  label=\"Email\"\r\n                  className=\"mb-3\"\r\n                >\r\n                  <Form.Control\r\n                    size=\"lg\"\r\n                    placeholder=\"Enter Email Address\"\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                  />\r\n                </FloatingLabel>\r\n              </Form.Group>\r\n              {userInfo && !userInfo.isSocialLogin && (\r\n                <>\r\n                  <Form.Group>\r\n                    <InputGroup className=\"d-block\">\r\n                      <FloatingLabel\r\n                        controlId=\"passwordinput\"\r\n                        label=\"Password\"\r\n                        style={{ display: \"flex\" }}\r\n                        className=\"mb-3\"\r\n                      >\r\n                        <Form.Control\r\n                          size=\"lg\"\r\n                          type={typePassword}\r\n                          placeholder=\"Enter your password\"\r\n                          value={password}\r\n                          style={{\r\n                            borderRight: \"none\",\r\n                            width: \"100%\",\r\n                          }}\r\n                          onChange={(e) => setPassword(e.target.value)}\r\n                        />\r\n                        <div className=\"input-group-append\">\r\n                          <InputGroup.Text\r\n                            onClick={showHidePassword}\r\n                            style={{\r\n                              fontSize: \"1rem\",\r\n                              height: \"100%\",\r\n                              marginLeft: \"-0.5em\",\r\n                              background: \"transparent\",\r\n                              borderLeft: \"none\",\r\n                            }}\r\n                          >\r\n                            {typePassword === \"text\" ? (\r\n                              <i className=\"far fa-eye-slash\" />\r\n                            ) : (\r\n                              <i className=\"far fa-eye\" />\r\n                            )}\r\n                          </InputGroup.Text>\r\n                        </div>\r\n                      </FloatingLabel>\r\n                    </InputGroup>\r\n                  </Form.Group>\r\n                  <Form.Group>\r\n                    <InputGroup className=\"d-block\">\r\n                      <FloatingLabel\r\n                        controlId=\"confirmpasswordinput\"\r\n                        label=\"Confirm Password\"\r\n                        style={{ display: \"flex\" }}\r\n                        className=\"mb-3\"\r\n                      >\r\n                        <Form.Control\r\n                          size=\"lg\"\r\n                          type={typeConfirmPassword}\r\n                          placeholder=\"Confirm password\"\r\n                          value={confirmPassword}\r\n                          style={{\r\n                            borderRight: \"none\",\r\n                          }}\r\n                          onChange={(e) => setConfirmPassword(e.target.value)}\r\n                        />\r\n                        <div className=\"input-group-append\">\r\n                          <InputGroup.Text\r\n                            onClick={showHideConfirmPassword}\r\n                            style={{\r\n                              fontSize: \"1rem\",\r\n                              height: \"100%\",\r\n                              marginLeft: \"-0.5em\",\r\n                              background: \"transparent\",\r\n                              borderLeft: \"none\",\r\n                            }}\r\n                          >\r\n                            {typeConfirmPassword === \"text\" ? (\r\n                              <i className=\"far fa-eye-slash\" />\r\n                            ) : (\r\n                              <i className=\"far fa-eye\" />\r\n                            )}\r\n                          </InputGroup.Text>\r\n                        </div>\r\n                      </FloatingLabel>\r\n                    </InputGroup>\r\n                  </Form.Group>\r\n                </>\r\n              )}\r\n              <div className=\"d-grid mb-3\">\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={!showSubmitButton}\r\n                  style={{\r\n                    padding: \"0.5em 1em\",\r\n                  }}\r\n                >\r\n                  Update Profile\r\n                </Button>\r\n              </div>\r\n            </Form>\r\n          </div>\r\n        )}\r\n      </Col>\r\n      {/* display orders */}\r\n      <Col\r\n        md={9}\r\n        style={\r\n          userInfo && !userInfo.isConfirmed\r\n            ? {\r\n                opacity: \"0.5\",\r\n                pointerEvents: \"none\",\r\n              }\r\n            : {\r\n                opacity: \"1\",\r\n                pointerEvents: \"\",\r\n              }\r\n        }\r\n      >\r\n        {allOrders.length ? (\r\n          <>\r\n            <h2 className=\"text-center\">My Orders</h2>\r\n            {loadingOrdersList ? (\r\n              <Loader />\r\n            ) : errorOrdersList ? (\r\n              <Message dismissible variant=\"danger\" duration={10}>\r\n                {errorOrdersList}\r\n              </Message>\r\n            ) : (\r\n              <Table\r\n                striped\r\n                bordered\r\n                responsive\r\n                className=\"table-sm text-center\"\r\n              >\r\n                <thead>\r\n                  <tr>\r\n                    <th>DATE</th>\r\n                    <th>TOTAL</th>\r\n                    <th>PAID</th>\r\n                    <th>DELIVERED</th>\r\n                    <th>ACTION</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {orders.map((order, idx) => (\r\n                    <tr\r\n                      key={idx}\r\n                      style={{\r\n                        textAlign: \"center\",\r\n                        padding: \"0\",\r\n                      }}\r\n                    >\r\n                      <td>{getDateString(order.createdAt)}</td>\r\n                      <td>\r\n                        {order.totalPrice.toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 0,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </td>\r\n                      <td>\r\n                        {order.isPaid ? (\r\n                          getDateString(order.paidAt)\r\n                        ) : (\r\n                          <i\r\n                            className=\"fas fa-times\"\r\n                            style={{\r\n                              color: \"red\",\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        {order.isDelivered ? (\r\n                          getDateString(order.deliveredAt)\r\n                        ) : (\r\n                          <i\r\n                            className=\"fas fa-times\"\r\n                            style={{\r\n                              color: \"red\",\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        <LinkContainer to={`/order/${order._id}`}>\r\n                          <Button\r\n                            variant=\"link\"\r\n                            className=\"btn-sm\"\r\n                            style={{ margin: \"0\" }}\r\n                          >\r\n                            Details\r\n                          </Button>\r\n                        </LinkContainer>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </Table>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <Card style={{ border: \"none\", margin: \"0 auto\" }}>\r\n            <Card.Body>\r\n              <Card.Title>No Orders Yet!</Card.Title>\r\n              <Card.Text>\r\n                Details about all your orders will show up here.{\" \"}\r\n                <Link to=\"/\">Continue Shopping</Link>\r\n              </Card.Text>\r\n            </Card.Body>\r\n          </Card>\r\n        )}\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card } from \"react-bootstrap\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport { confirmUser } from \"../actions/userActions\";\r\nimport Meta from \"../components/Meta\";\r\n\r\nconst ConfirmPage = ({ match, history }) => {\r\n  const dispatch = useDispatch();\r\n  const userConfirm = useSelector((state) => state.userConfirm); // get the userInfo to check if user is confirmed or not\r\n  const { loading, error, isConfirmed } = userConfirm;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      setIsLoggedIn(true);\r\n    } else {\r\n      setIsLoggedIn(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // confirm user once the email token is available\r\n    dispatch(confirmUser(match.params.token, isLoggedIn));\r\n  }, [dispatch, match, isLoggedIn]);\r\n\r\n  if (loading || (!isConfirmed && !error)) {\r\n    return <Loader />;\r\n  } else if (error) {\r\n    // redirect to login page after a 10 seconds\r\n    setTimeout(() => {\r\n      history.push(\"/login\");\r\n    }, 10000);\r\n    return (\r\n      <Message dismissible variant=\"danger\" duration={10}>\r\n        Verfication Failed. Please try to login again.\r\n      </Message>\r\n    );\r\n  } else if (isConfirmed) {\r\n    // set a variable in local storage to fill email aftrer redirecting to login page after email confirmation\r\n    localStorage.setItem(\"fillEmailOnLoginPage\", \"true\");\r\n    return (\r\n      <Card style={{ border: \"none\", margin: \"0 auto\" }}>\r\n        <Meta title=\"Confirm Password | The Style Studio\" />\r\n        <Card.Body>\r\n          <Card.Title>Account Confirmed</Card.Title>\r\n          <Card.Text>\r\n            {setIsLoggedIn\r\n              ? \"Your account has been successfully verified! Go on and shop for the best deals of the day!\"\r\n              : `Your account has been successfully verified! Please\r\n\t\t\t\t\t\tlogin and start exploring the best deals on all your\r\n\t\t\t\t\t\tfavorite products.`}\r\n          </Card.Text>\r\n          {!setIsLoggedIn ? <Link to=\"/login\">Login</Link> : null}\r\n        </Card.Body>\r\n      </Card>\r\n    );\r\n  }\r\n};\r\n\r\nexport default ConfirmPage;\r\n","import React from 'react';\r\nimport { Nav } from 'react-bootstrap';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport '../styles/check-status.css';\r\n\r\n// there are 4 steps in the checkout process\r\n// step 1 is logging in\r\n// step 2 is shipping address input\r\n// step 3 is selecting payment option\r\n// step 4 is placing the order and seeing payment button\r\nconst CheckoutStatus = ({ step1, step2, step3, step4 }) => {\r\n\treturn (\r\n\t\t<Nav className='status-bar'>\r\n\t\t\t<div className='status-checkpoint'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='circle'\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\tstep1 ? { background: '#2c3e50' } : { background: '' }\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{step1 ? (\r\n\t\t\t\t\t<LinkContainer to='/login'>\r\n\t\t\t\t\t\t<Nav.Link>Sign In</Nav.Link>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Nav.Link disabled>Sign In</Nav.Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className='connection' />\r\n\t\t\t<div className='status-checkpoint'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='circle'\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\tstep1 && step2\r\n\t\t\t\t\t\t\t? { background: '#2c3e50' }\r\n\t\t\t\t\t\t\t: { background: '' }\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{step2 ? (\r\n\t\t\t\t\t<LinkContainer to='/shipping'>\r\n\t\t\t\t\t\t<Nav.Link>Shipping</Nav.Link>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Nav.Link disabled>Shipping</Nav.Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className='connection' />\r\n\r\n\t\t\t<div className='status-checkpoint'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='circle'\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\tstep1 && step2 && step3\r\n\t\t\t\t\t\t\t? { background: '#2c3e50' }\r\n\t\t\t\t\t\t\t: { background: '' }\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{step3 ? (\r\n\t\t\t\t\t<LinkContainer to='/payment'>\r\n\t\t\t\t\t\t<Nav.Link>Payment</Nav.Link>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Nav.Link disabled>Payment</Nav.Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className='connection' />\r\n\r\n\t\t\t<div className='status-checkpoint'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='circle'\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\tstep1 && step2 && step3 && step4\r\n\t\t\t\t\t\t\t? { background: '#2c3e50' }\r\n\t\t\t\t\t\t\t: { background: '' }\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{step4 ? (\r\n\t\t\t\t\t<LinkContainer to='/placeorder'>\r\n\t\t\t\t\t\t<Nav.Link>Place Order</Nav.Link>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Nav.Link disabled>Place Order</Nav.Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</Nav>\r\n\t);\r\n};\r\n\r\nexport default CheckoutStatus;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Form, Button, FloatingLabel } from 'react-bootstrap';\r\nimport FormContainer from '../components/FormContainer';\r\nimport CheckoutStatus from '../components/CheckoutStatus';\r\nimport { saveShippingAddress } from '../actions/cartActions';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nconst ShippingPage = ({ history }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst cart = useSelector((state) => state.cart);\r\n\tconst { cartItems, shippingAddress } = cart;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error } = userDetails;\r\n\r\n\tconst [address, setAddress] = useState(shippingAddress.address);\r\n\tconst [city, setCity] = useState(shippingAddress.city);\r\n\tconst [postalCode, setPostalCode] = useState(shippingAddress.postalCode);\r\n\tconst [country, setCountry] = useState(shippingAddress.country);\r\n\r\n\t// fetch user details from the redux store\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// update access token to a new ine using the refresh tokens\r\n\tuseEffect(() => {\r\n\t\tif (error && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [error, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!(cartItems.length && userInfo)) {\r\n\t\t\thistory.push('/');\r\n\t\t}\r\n\t}, [cartItems, history, userInfo]);\r\n\r\n\t// save shipping address and move to payment screen\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(\r\n\t\t\tsaveShippingAddress({\r\n\t\t\t\taddress,\r\n\t\t\t\tcity,\r\n\t\t\t\tpostalCode,\r\n\t\t\t\tcountry,\r\n\t\t\t})\r\n\t\t);\r\n\t\thistory.push('/payment');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t<CheckoutStatus step1 step2 />\r\n\t\t\t<h1>Shipping Address</h1>\r\n\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t<Form.Group controlId='address'>\r\n\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='addressinput'\r\n\t\t\t\t\t\tlabel='Address'\r\n\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\tplaceholder='Enter address'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={address}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={(e) => setAddress(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId='city'>\r\n\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='cityinput'\r\n\t\t\t\t\t\tlabel='City'\r\n\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\tplaceholder='Enter City'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={city}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={(e) => setCity(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId='postalCode'>\r\n\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='postalcodeinput'\r\n\t\t\t\t\t\tlabel='Postal Code'\r\n\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\tplaceholder='Enter Postal Code'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={postalCode}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={(e) => setPostalCode(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId='country'>\r\n\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='countryinput'\r\n\t\t\t\t\t\tlabel='Country'\r\n\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\tplaceholder='Enter Country'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={country}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={(e) => setCountry(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tContinue\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default ShippingPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Form, Button, Col } from 'react-bootstrap';\r\nimport FormContainer from '../components/FormContainer';\r\nimport CheckoutStatus from '../components/CheckoutStatus';\r\nimport { savePaymentMethod } from '../actions/cartActions';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nconst PaymentPage = ({ history }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst cart = useSelector((state) => state.cart);\r\n\tconst { shippingAddress } = cart;\r\n\r\n\tconst [paymentMethod, setPaymentMethod] = useState('Credit/Debit Card'); // default option is the stripe one, but users might not understand 'stripe'\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error } = userDetails;\r\n\r\n\t// fetch user details\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// refresh the access tokens when user details throws an error\r\n\tuseEffect(() => {\r\n\t\tif (error && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [error, dispatch, userInfo]);\r\n\r\n\t// if shipping address is empty, redirect\r\n\tuseEffect(() => {\r\n\t\tif (!shippingAddress) {\r\n\t\t\thistory.push('/shipping');\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tconst handleChange = (e) => {\r\n\t\tsetPaymentMethod(e.target.value);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(savePaymentMethod(paymentMethod));\r\n\t\thistory.push('/placeorder');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t{/* three steps are done in the checkout process */}\r\n\t\t\t<CheckoutStatus step1 step2 step3 />\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\tflexFlow: 'column nowrap',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t}}>\r\n\t\t\t\t<h1>Payment Method</h1>\r\n\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\tlabel='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tid='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tname='paymentMethod'\r\n\t\t\t\t\t\t\t\tvalue='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tchecked={paymentMethod === 'Credit/Debit Card'}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\tlabel='PayPal Account'\r\n\t\t\t\t\t\t\t\tid='PayPal'\r\n\t\t\t\t\t\t\t\tname='paymentMethod'\r\n\t\t\t\t\t\t\t\tvalue='PayPal'\r\n\t\t\t\t\t\t\t\tchecked={paymentMethod === 'PayPal'}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<div className='d-grid'>\r\n\t\t\t\t\t\t<Button type='submit' className='my-3' size='lg'>\r\n\t\t\t\t\t\t\tContinue\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default PaymentPage;\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button, Row, Col, ListGroup, Image, Card } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CheckoutStatus from \"../components/CheckoutStatus\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport { createOrder } from \"../actions/orderActions\";\r\nimport { CART_RESET } from \"../constants/cartConstants\";\r\nimport { refreshLogin, getUserDetails } from \"../actions/userActions\";\r\n\r\nconst PlaceOrderPage = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems, shippingAddress, paymentMethod } = cart;\r\n\r\n  const orderCreate = useSelector((state) => state.orderCreate);\r\n  const { order, loading, success, error } = orderCreate;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { error: userLoginError } = userDetails;\r\n\r\n  // fetch the userinfo from reducx store\r\n  useEffect(() => {\r\n    userInfo\r\n      ? userInfo.isSocialLogin\r\n        ? dispatch(getUserDetails(userInfo.id))\r\n        : dispatch(getUserDetails(\"profile\"))\r\n      : dispatch(getUserDetails(\"profile\"));\r\n  }, [userInfo, dispatch]);\r\n\r\n  // refresh access token when user detail throws error\r\n  useEffect(() => {\r\n    if (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [userLoginError, dispatch, userInfo]);\r\n\r\n  useEffect(() => {\r\n    if (success) {\r\n      localStorage.removeItem(\"cartItems\");\r\n      dispatch({ type: CART_RESET, payload: shippingAddress }); // remove items from cart once paid, but keep the shipping address in store\r\n      history.push(`/order/${order._id}`);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [success, history]);\r\n\r\n  // All prices, tax is randomly  assigned\r\n  cart.itemsPrice = cartItems.reduce(\r\n    (acc, item) => acc + item.price * item.qty,\r\n    0\r\n  );\r\n\r\n  cart.shippingPrice = cart.itemsPrice > 100 ? 40 : 20;\r\n  cart.taxPrice = 0.18 * cart.itemsPrice;\r\n  cart.totalPrice = cart.itemsPrice + cart.taxPrice + cart.shippingPrice;\r\n\r\n  const handleOrder = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      createOrder({\r\n        orderItems: cartItems,\r\n        shippingAddress,\r\n        paymentMethod,\r\n        itemsPrice: cart.itemsPrice,\r\n        shippingPrice: cart.shippingPrice,\r\n        taxPrice: cart.taxPrice,\r\n        totalPrice: cart.totalPrice,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* last step in the ckecout process */}\r\n      <CheckoutStatus step1 step2 step3 step4 />\r\n      <Row>\r\n        {loading ? (\r\n          <Loader />\r\n        ) : (\r\n          <>\r\n            <Col md={8}>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h2>Shipping</h2>\r\n                  <p>\r\n                    <strong>Address: </strong> {shippingAddress.address},{\" \"}\r\n                    {shippingAddress.city}-{shippingAddress.postalCode},{\" \"}\r\n                    {shippingAddress.country}\r\n                  </p>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <h2>Payment Method</h2>\r\n                  <p>\r\n                    <strong>Method: </strong> {paymentMethod}\r\n                  </p>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <h2>Cart Items</h2>\r\n                  {cartItems.length !== 0 ? (\r\n                    <ListGroup variant=\"flush\">\r\n                      {cartItems.map((item, idx) => (\r\n                        <ListGroup.Item key={idx}>\r\n                          <Row>\r\n                            <Col md={2}>\r\n                              <Image\r\n                                className=\"product-image\"\r\n                                src={item.image}\r\n                                alt={item.name}\r\n                                fluid\r\n                                rounded\r\n                              />\r\n                            </Col>\r\n                            <Col>\r\n                              <Link to={`/product/${item.product}`}>\r\n                                {item.name}\r\n                              </Link>\r\n                            </Col>\r\n                            <Col md={4}>\r\n                              {item.qty} x {item.price} ={\" \"}\r\n                              {(item.qty * item.price).toLocaleString(\"en-US\", {\r\n                                maximumFractionDigits: 2,\r\n                                style: \"currency\",\r\n                                currency: \"USD\",\r\n                              })}\r\n                            </Col>\r\n                          </Row>\r\n                        </ListGroup.Item>\r\n                      ))}\r\n                    </ListGroup>\r\n                  ) : (\r\n                    <Message>Your cart is empty</Message>\r\n                  )}\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Card>\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item className=\"text-center\">\r\n                    <h2 className=\"text-center\">Order Summary</h2>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Subtotal</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {Number(cart.itemsPrice).toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Shipping</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {Number(cart.shippingPrice).toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Tax</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {Number(cart.taxPrice).toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Total</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {Number(cart.totalPrice).toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  {error && (\r\n                    <ListGroup.Item>\r\n                      <Message dismissible variant=\"danger\" duration={10}>\r\n                        {error}\r\n                      </Message>\r\n                    </ListGroup.Item>\r\n                  )}\r\n                  <ListGroup.Item className=\"d-grid gap-2\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      size=\"lg\"\r\n                      disabled={!cartItems.length}\r\n                      onClick={handleOrder}\r\n                    >\r\n                      Place Order\r\n                    </Button>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </>\r\n        )}\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PlaceOrderPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport { payOrder } from '../actions/orderActions';\r\nimport { savePaymentMethod } from '../actions/cartActions';\r\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js'; // for stripe CC component\r\nimport Message from '../components/Message';\r\n\r\nconst CheckoutForm = ({ price, orderID }) => {\r\n\tconst [error, setError] = useState(''); // from the stripe component itself\r\n\tconst dispatch = useDispatch();\r\n\tconst [clientSecret, setClientSecret] = useState(''); // from the payment intent sent from server\r\n\tconst stripe = useStripe();\r\n\tconst elements = useElements();\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\t// STEP 1: create a payment intent and getting the secret\r\n\tuseEffect(() => {\r\n\t\tconst getClientSecret = async () => {\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/orders/stripe-payment',\r\n\t\t\t\t{ price, email: userInfo.email },\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tsetClientSecret(data.clientSecret);\r\n\t\t};\r\n\r\n\t\tif (userInfo && price) getClientSecret();\r\n\t}, [price, userInfo]);\r\n\r\n\t// STEP 2: make the payment after filling the form properly\r\n\tconst makePayment = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!stripe || !elements) {\r\n\t\t\t// Stripe.js has not yet loaded.\r\n\t\t\t// Make  sure to disable form submission until Stripe.js has loaded.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (clientSecret) {\r\n\t\t\tconst payload = await stripe.confirmCardPayment(clientSecret, {\r\n\t\t\t\tpayment_method: {\r\n\t\t\t\t\tcard: elements.getElement(CardElement),\r\n\t\t\t\t\tbilling_details: {\r\n\t\t\t\t\t\tname: userInfo.name,\r\n\t\t\t\t\t\temail: userInfo.email,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\t// console.log(payload.error);\r\n\t\t\tif (!payload.error) {\r\n\t\t\t\tdispatch(savePaymentMethod('Stripe'));\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tpayOrder(orderID, {\r\n\t\t\t\t\t\t...payload.paymentIntent,\r\n\t\t\t\t\t\tpaymentMode: 'stripe',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tsetError(payload.error.message);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\twindow.location.reload();\r\n\t\t}\r\n\t};\r\n\r\n\t// render a checkout form for filling details about credit or debit cards\r\n\treturn (\r\n\t\t<Form id='payment-form' onSubmit={makePayment}>\r\n\t\t\t{error && (\r\n\t\t\t\t<Message dismissible variant='danger'>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t<Form.Group\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmargin: '1em 0',\r\n\t\t\t\t\tfontSize: '1em',\r\n\t\t\t\t}}>\r\n\t\t\t\t<CardElement\r\n\t\t\t\t\toptions={{\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tbase: {\r\n\t\t\t\t\t\t\t\tfontSize: '16px',\r\n\t\t\t\t\t\t\t\tcolor: '#424770',\r\n\t\t\t\t\t\t\t\t'::placeholder': {\r\n\t\t\t\t\t\t\t\t\tcolor: '#aab7c4',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tinvalid: {\r\n\t\t\t\t\t\t\t\tcolor: '#9e2146',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tid='card-element'\r\n\t\t\t\t/>\r\n\t\t\t</Form.Group>\r\n\t\t\t<div className='d-grid'>\r\n\t\t\t\t<Button disabled={!stripe} size='lg' type='submit'>\r\n\t\t\t\t\tPay Now\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default CheckoutForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Row, Col, ListGroup, Image, Card, Button } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\"; // for paypal payments\r\nimport axios from \"axios\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport {\r\n  getOrderDetails,\r\n  payOrder,\r\n  deliverOrder,\r\n} from \"../actions/orderActions\";\r\nimport {\r\n  ORDER_PAY_RESET,\r\n  ORDER_DELIVER_RESET,\r\n} from \"../constants/orderConstants\";\r\nimport { savePaymentMethod } from \"../actions/cartActions\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { refreshLogin } from \"../actions/userActions\";\r\nimport CheckoutForm from \"../components/CheckoutForm\"; //stripe checkout form\r\nimport getDateString from \"../utils/getDateString\";\r\n\r\nconst OrderPage = ({ match, history }) => {\r\n  // load stripe\r\n  const stripePromise = loadStripe(\r\n    process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY\r\n  );\r\n  // for paypal payment\r\n  const [SDKReady, setSDKReady] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const orderID = match.params.id;\r\n\r\n  const orderDetails = useSelector((state) => state.orderDetails);\r\n  const { loading, order, error } = orderDetails;\r\n\r\n  const orderPay = useSelector((state) => state.orderPay);\r\n  const { loading: loadingPay, success: successPay } = orderPay;\r\n\r\n  const orderDeliver = useSelector((state) => state.orderDeliver);\r\n  const { loading: loadingDeliver, success: successDeliver } = orderDeliver;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { error: userLoginError } = userDetails;\r\n\r\n  // get new access tokens using the refresh token, is user details throws an error\r\n  useEffect(() => {\r\n    if (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [userLoginError, dispatch, userInfo]);\r\n\r\n  // set order to paid or delivered, and fetch updated orders\r\n  useEffect(() => {\r\n    if (!order || order._id !== orderID || successPay || successDeliver) {\r\n      if (successPay) dispatch({ type: ORDER_PAY_RESET });\r\n      if (successDeliver) dispatch({ type: ORDER_DELIVER_RESET });\r\n      dispatch(getOrderDetails(orderID));\r\n    }\r\n  }, [order, orderID, dispatch, successPay, successDeliver]);\r\n\r\n  // add the script required for paypal payments dynamically, to avoid possible attacks\r\n  useEffect(() => {\r\n    const addScript = async () => {\r\n      const config = userInfo.isSocialLogin\r\n        ? {\r\n            headers: {\r\n              Authorization: `SocialLogin ${userInfo.id}`,\r\n            },\r\n          }\r\n        : {\r\n            headers: {\r\n              Authorization: `Bearer ${userInfo.accessToken}`,\r\n            },\r\n          };\r\n      const { data: clientID } = await axios.get(\"/api/config/paypal\", config);\r\n      // add the script\r\n      const script = document.createElement(\"script\");\r\n      script.async = true;\r\n      script.type = \"text/javascript\";\r\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientID}&currency=USD&disable-funding=credit,card`;\r\n      script.onload = () => setSDKReady(true);\r\n      document.body.appendChild(script);\r\n    };\r\n    if (!userInfo) history.push(\"/login\"); // if not loggein in\r\n    if (!SDKReady) addScript();\r\n  }, [userInfo, SDKReady, history]);\r\n\r\n  // save the payment mthod as paypal\r\n  const successPaymentHandler = (paymentResult) => {\r\n    dispatch(savePaymentMethod(\"PayPal\"));\r\n    dispatch(payOrder(orderID, { ...paymentResult, paymentMode: \"paypal\" }));\r\n  };\r\n\r\n  // set order as delivered\r\n  const successDeliveryHandler = () => {\r\n    dispatch(deliverOrder(orderID));\r\n  };\r\n\r\n  return loading ? (\r\n    <Loader />\r\n  ) : error ? (\r\n    <Message dismissible variant=\"danger\" duration={10}>\r\n      {error}\r\n    </Message>\r\n  ) : (\r\n    <>\r\n      <h2>Order {orderID}</h2>\r\n      <Row>\r\n        {loading ? (\r\n          <Loader />\r\n        ) : (\r\n          <>\r\n            <Col md={8}>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h2>Shipping</h2>\r\n                  <p>\r\n                    <strong>Name: </strong>\r\n                    {order.user.name}\r\n                  </p>\r\n                  <p>\r\n                    <strong>Email: </strong>\r\n                    <a href={`mailto:${order.user.email}`}>\r\n                      {order.user.email}\r\n                    </a>\r\n                  </p>\r\n                  <p>\r\n                    <strong>Address: </strong> {order.shippingAddress.address},{\" \"}\r\n                    {order.shippingAddress.city}-\r\n                    {order.shippingAddress.postalCode},{\" \"}\r\n                    {order.shippingAddress.country}\r\n                  </p>\r\n                  <div>\r\n                    {order.isDelivered ? (\r\n                      <Message variant=\"success\">\r\n                        Delivered at: {getDateString(order.deliveredAt)}\r\n                      </Message>\r\n                    ) : (\r\n                      <Message variant=\"danger\">Not Delivered</Message>\r\n                    )}\r\n                  </div>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <h2>Payment Method</h2>\r\n                  <p>\r\n                    <strong>Method: </strong> {order.paymentMethod}\r\n                  </p>\r\n                  <div>\r\n                    {order.isPaid ? (\r\n                      <Message variant=\"success\">\r\n                        Paid at: {getDateString(order.paidAt)}\r\n                      </Message>\r\n                    ) : (\r\n                      <Message variant=\"danger\">Not Paid</Message>\r\n                    )}\r\n                  </div>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <h2>Cart Items</h2>\r\n                  {order.orderItems.length !== 0 ? (\r\n                    <ListGroup variant=\"flush\">\r\n                      <div\r\n                        style={{\r\n                          background: \"red\",\r\n                        }}\r\n                      ></div>\r\n                      {order.orderItems.map((item, idx) => (\r\n                        <ListGroup.Item key={idx}>\r\n                          <Row>\r\n                            <Col md={2}>\r\n                              <Image\r\n                                className=\"product-image\"\r\n                                src={item.image}\r\n                                alt={item.name}\r\n                                fluid\r\n                                rounded\r\n                              />\r\n                            </Col>\r\n                            <Col>\r\n                              <Link to={`/product/${item.product}`}>\r\n                                {item.name}\r\n                              </Link>\r\n                            </Col>\r\n                            <Col md={4}>\r\n                              {item.qty} x {item.price} ={\" \"}\r\n                              {(item.qty * item.price).toLocaleString(\"en-US\", {\r\n                                maximumFractionDigits: 2,\r\n                                style: \"currency\",\r\n                                currency: \"USD\",\r\n                              })}\r\n                            </Col>\r\n                          </Row>\r\n                        </ListGroup.Item>\r\n                      ))}\r\n                    </ListGroup>\r\n                  ) : (\r\n                    <Message>No order</Message>\r\n                  )}\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Col>\r\n            <Col md={4}>\r\n              <Card>\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item>\r\n                    <h2 className=\"text-center\">Order Summary</h2>\r\n                  </ListGroup.Item>\r\n                  {error && (\r\n                    <ListGroup.Item>\r\n                      <Message dismissible variant=\"danger\" duration={10}>\r\n                        {error}\r\n                      </Message>\r\n                    </ListGroup.Item>\r\n                  )}\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Subtotal</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {order.itemsPrice.toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Shipping</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {order.shippingPrice.toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Tax</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {order.taxPrice.toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Col>\r\n                        <strong>Total</strong>\r\n                      </Col>\r\n                      <Col>\r\n                        {order.totalPrice.toLocaleString(\"en-US\", {\r\n                          maximumFractionDigits: 2,\r\n                          style: \"currency\",\r\n                          currency: \"USD\",\r\n                        })}\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  {/* show paypal button or the stripe checkout form */}\r\n                  {!order.isPaid && (\r\n                    <>\r\n                      {order.paymentMethod === \"PayPal\" ? (\r\n                        <ListGroup.Item>\r\n                          {loadingPay && <Loader />}\r\n                          {!SDKReady ? (\r\n                            <Loader />\r\n                          ) : (\r\n                            <PayPalButton\r\n                              style={{\r\n                                shape: \"rect\",\r\n                                color: \"gold\",\r\n                                layout: \"vertical\",\r\n                                label: \"pay\",\r\n                              }}\r\n                              currency=\"USD\"\r\n                              amount={Number(order.totalPrice / 1).toFixed(2)}\r\n                              onSuccess={successPaymentHandler}\r\n                            />\r\n                          )}\r\n                        </ListGroup.Item>\r\n                      ) : (\r\n                        <ListGroup.Item>\r\n                          {loadingPay && <Loader />}\r\n                          <Elements stripe={stripePromise}>\r\n                            {/* price in paisa */}\r\n                            <CheckoutForm\r\n                              price={order.totalPrice * 100}\r\n                              orderID={orderID}\r\n                            />\r\n                          </Elements>\r\n                        </ListGroup.Item>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                  {/* show this only to admins, after payment is done */}\r\n                  {userInfo &&\r\n                    userInfo.isAdmin &&\r\n                    order.isPaid &&\r\n                    !order.isDelivered && (\r\n                      <ListGroup.Item>\r\n                        {loadingDeliver && <Loader />}\r\n                        <div className=\"d-grid\">\r\n                          <Button\r\n                            type=\"button\"\r\n                            variant=\"info\"\r\n                            size=\"lg\"\r\n                            onClick={successDeliveryHandler}\r\n                          >\r\n                            Mark as Delivered\r\n                          </Button>\r\n                        </div>\r\n                      </ListGroup.Item>\r\n                    )}\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </>\r\n        )}\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Form, Button, InputGroup, FloatingLabel } from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport FormContainer from '../components/FormContainer';\r\nimport { resetUserPassword } from '../actions/userActions';\r\n\r\nconst PasswordResetPage = ({ match, history }) => {\r\n\tconst [name, setName] = useState('');\r\n\tconst [typePassword, setTypePassword] = useState('password');\r\n\tconst [typeConfirmPassword, setTypeConfirmPassword] = useState('password');\r\n\tconst [message, setMessage] = useState(null);\r\n\tconst [confirmPassword, setConfirmPassword] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\tconst userResetPassword = useSelector((state) => state.userResetPassword);\r\n\tconst { loading, resetPassword, error } = userResetPassword;\r\n\r\n\t// get the name stored in the local storage and ask that user to reset password\r\n\tuseEffect(() => {\r\n\t\tconst nameFromLocalStorage = localStorage.getItem('EcommerceUserName');\r\n\t\tif (nameFromLocalStorage) {\r\n\t\t\tsetName(nameFromLocalStorage);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (resetPassword) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thistory.push('/login');\r\n\t\t\t}, 10000);\r\n\t\t}\r\n\t}, [history, resetPassword]);\r\n\r\n\tconst showHidePassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypePassword(typePassword === 'password' ? 'text' : 'password');\r\n\t};\r\n\tconst showHideConfirmPassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypeConfirmPassword(\r\n\t\t\ttypeConfirmPassword === 'password' ? 'text' : 'password'\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (password !== confirmPassword) {\r\n\t\t\tsetMessage('Passwords do not match. Please retry.');\r\n\t\t} else {\r\n\t\t\tdispatch(resetUserPassword(match.params.token, password));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t<h1>{name ? `${name}, reset password` : 'Reset Password'}</h1>\r\n\t\t\t{message && (\r\n\t\t\t\t<Message dismissible duration={8} variant='warning'>\r\n\t\t\t\t\t{message}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{resetPassword && (\r\n\t\t\t\t<Message dismissible variant='success' duration={8}>\r\n\t\t\t\t\tPassword Changed Successfully.\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{error && (\r\n\t\t\t\t<Message dismissible variant='danger'>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{loading ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : (\r\n\t\t\t\t<Form onSubmit={handleSubmit} style={{ width: '33em' }}>\r\n\t\t\t\t\t<Form.Group className='mb-2'>\r\n\t\t\t\t\t\t<InputGroup style={{ width: '100%' }}>\r\n\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\ttype={typePassword}\r\n\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\twidth: '205%',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tsetPassword(e.target.value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\tonClick={showHidePassword}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: '1em',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\twidth: '17.5%',\r\n\t\t\t\t\t\t\t\t\t\theight: '78%',\r\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '15rem',\r\n\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{typePassword === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group className='my-2'>\r\n\t\t\t\t\t\t<InputGroup style={{ width: '100%' }}>\r\n\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\tcontrolId='confirmpasswordinput'\r\n\t\t\t\t\t\t\t\tlabel='Confirm password'\r\n\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\ttype={typeConfirmPassword}\r\n\t\t\t\t\t\t\t\t\tplaceholder='Confirm your password'\r\n\t\t\t\t\t\t\t\t\tvalue={confirmPassword}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\twidth: '205%',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tsetConfirmPassword(e.target.value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\tonClick={showHideConfirmPassword}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: '1em',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\twidth: '17.5%',\r\n\t\t\t\t\t\t\t\t\t\theight: '78%',\r\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '15rem',\r\n\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{typeConfirmPassword === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default PasswordResetPage;\r\n","import React, { useEffect } from 'react';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Table, Button } from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport { listAllUsers, deleteUser, refreshLogin } from '../actions/userActions';\r\nimport Paginate from '../components/Paginate';\r\n\r\nconst UserListPage = ({ match, history }) => {\r\n\tconst pageNumber = match.params.pageNumber || 1; // to fetch various pages of orders\r\n\tconst dispatch = useDispatch();\r\n\tconst userList = useSelector((state) => state.userList);\r\n\tconst { loading, users, error, page, pages, total } = userList;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDelete = useSelector((state) => state.userDelete);\r\n\tconst { success: successDelete } = userDelete;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInfo && userInfo.isAdmin) dispatch(listAllUsers(pageNumber));\r\n\t\telse history.push('/login');\r\n\t}, [dispatch, history, userInfo, successDelete, pageNumber]);\r\n\r\n\tconst handleDelete = (id) => {\r\n\t\tif (window.confirm('Are you sure you wanna delete user?'))\r\n\t\t\tdispatch(deleteUser(id));\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h1>Users ({`${total || 0}`})</h1>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : error ? (\r\n\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t) : (\r\n\t\t\t\t<Table\r\n\t\t\t\t\tstriped\r\n\t\t\t\t\tbordered\r\n\t\t\t\t\tresponsive\r\n\t\t\t\t\tclassName='table-sm text-center'>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<th>NAME</th>\r\n\t\t\t\t\t\t\t<th>EMAIL</th>\r\n\t\t\t\t\t\t\t<th>CONFIRMED</th>\r\n\t\t\t\t\t\t\t<th>ADMIN</th>\r\n\t\t\t\t\t\t\t<th>ACTION</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{users &&\r\n\t\t\t\t\t\t\tusers.map((user) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<tr key={user._id}>\r\n\t\t\t\t\t\t\t\t\t\t<td>{user._id}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{user.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<a href={`mailto:${user.email}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{user.isConfirmed ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-check'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'green' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'red' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{user.isAdmin ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-check'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'green' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'red' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-around',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\t\t\t\tto={`/admin/user/${user._id}/edit`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-edit' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-sm'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleDelete(user._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash' />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t)}\r\n\t\t\t<Paginate\r\n\t\t\t\tpages={pages}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tisAdmin={true}\r\n\t\t\t\tforUsers={true}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default UserListPage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Form, Button, InputGroup } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport Meta from \"../components/Meta\";\r\nimport FormContainer from \"../components/FormContainer\";\r\nimport {\r\n  getUserDetails,\r\n  updateUser,\r\n  refreshLogin,\r\n} from \"../actions/userActions\";\r\nimport { USER_UPDATE_RESET } from \"../constants/userConstants\";\r\n\r\nconst UserEditPage = ({ match, history }) => {\r\n  const userId = match.params.id;\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { loading, user, error } = userDetails;\r\n\r\n  const userUpdate = useSelector((state) => state.userUpdate);\r\n  const {\r\n    loading: loadingUpdate,\r\n    error: errorUpdate,\r\n    success: successUpdate,\r\n  } = userUpdate;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  // get new access tokens\r\n  useEffect(() => {\r\n    if (error && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [error, dispatch, userInfo]);\r\n\r\n  // update user details from the admin panel view\r\n  useEffect(() => {\r\n    if (successUpdate) {\r\n      dispatch({ type: USER_UPDATE_RESET });\r\n      history.push(\"/admin/userlist\");\r\n    } else {\r\n      if (!user || !user.name || user._id !== userId) {\r\n        dispatch(getUserDetails(userId));\r\n      } else {\r\n        setName(user.name);\r\n        setEmail(user.email);\r\n        setIsAdmin(user.isAdmin);\r\n      }\r\n    }\r\n  }, [user, dispatch, userId, successUpdate, history]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    dispatch(updateUser({ _id: userId, name, email, isAdmin }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Link to=\"/admin/userlist\">\r\n        <Button variant=\"outline-primary\" className=\"my-3\">\r\n          Go Back\r\n        </Button>\r\n      </Link>\r\n      <FormContainer>\r\n        {user && <Meta title={`Edit ${user.name} | The Style Studio`} />}\r\n        <h1>Edit User</h1>\r\n        {loadingUpdate ? (\r\n          <Loader />\r\n        ) : errorUpdate ? (\r\n          <Message dismissible variant=\"danger\" duration={10}>\r\n            {errorUpdate}\r\n          </Message>\r\n        ) : (\r\n          <>\r\n            {loading ? (\r\n              <Loader />\r\n            ) : (\r\n              <Form onSubmit={handleSubmit}>\r\n                {error && (\r\n                  <Message dismissible variant=\"danger\" duration={10}>\r\n                    {error}\r\n                  </Message>\r\n                )}\r\n\r\n                <Form.Group controlId=\"name\" className=\"mb-2\">\r\n                  <Form.Label>Name</Form.Label>\r\n                  <Form.Control\r\n                    size=\"lg\"\r\n                    placeholder=\"Enter Name\"\r\n                    type=\"text\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"email\" className=\"my-2\">\r\n                  <Form.Label>Email Address</Form.Label>\r\n                  <Form.Control\r\n                    size=\"lg\"\r\n                    placeholder=\"Enter Email Address\"\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"isAdmin\" className=\"my-2\">\r\n                  <InputGroup>\r\n                    <Form.Check\r\n                      type=\"checkbox\"\r\n                      label=\"Is Admin\"\r\n                      size=\"lg\"\r\n                      style={{ borderRight: \"none\" }}\r\n                      checked={isAdmin}\r\n                      onChange={(e) => setIsAdmin(e.target.checked)}\r\n                    ></Form.Check>\r\n                  </InputGroup>\r\n                </Form.Group>\r\n                <Button type=\"submit\" variant=\"dark\" className=\"my-1\">\r\n                  Edit\r\n                </Button>\r\n              </Form>\r\n            )}\r\n          </>\r\n        )}\r\n      </FormContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserEditPage;\r\n","import React, { useEffect } from \"react\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Table, Button, Row, Col } from \"react-bootstrap\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport {\r\n  listProducts,\r\n  deleteProduct,\r\n  createProduct,\r\n} from \"../actions/productActions\";\r\nimport { PRODUCT_CREATE_RESET } from \"../constants/productConstants\";\r\nimport Paginate from \"../components/Paginate\";\r\nimport { refreshLogin, getUserDetails } from \"../actions/userActions\";\r\n\r\nconst ProductListPage = ({ history, match }) => {\r\n  const pageNumber = match.params.pageNumber || 1;\r\n  const dispatch = useDispatch();\r\n  const productList = useSelector((state) => state.productList);\r\n  const { loading, products, error, pages, page } = productList;\r\n\r\n  const productDelete = useSelector((state) => state.productDelete);\r\n  const {\r\n    loading: loadingDelete,\r\n    success: successDelete,\r\n    error: errorDelete,\r\n  } = productDelete;\r\n\r\n  const productCreate = useSelector((state) => state.productCreate);\r\n  const {\r\n    loading: loadingCreate,\r\n    success: successCreate,\r\n    error: errorCreate,\r\n    product: createdProduct,\r\n  } = productCreate;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { error: userLoginError } = userDetails;\r\n\r\n  // fetch user login info\r\n  useEffect(() => {\r\n    userInfo\r\n      ? userInfo.isSocialLogin\r\n        ? dispatch(getUserDetails(userInfo.id))\r\n        : dispatch(getUserDetails(\"profile\"))\r\n      : dispatch(getUserDetails(\"profile\"));\r\n  }, [userInfo, dispatch]);\r\n\r\n  // refresh token for expired access tokens\r\n  useEffect(() => {\r\n    if (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [userLoginError, dispatch, userInfo]);\r\n\r\n  useEffect(() => {\r\n    if (!userInfo.isAdmin) history.push(\"/login\");\r\n    dispatch({ type: PRODUCT_CREATE_RESET }); //reset the new product detail\r\n    if (successCreate)\r\n      history.push(`/admin/product/${createdProduct._id}/edit`);\r\n    else dispatch(listProducts(\"\", pageNumber, 10)); // 3rd parameter is the no of products to be listed per page\r\n  }, [\r\n    dispatch,\r\n    history,\r\n    userInfo,\r\n    successDelete,\r\n    successCreate,\r\n    createdProduct,\r\n    pageNumber,\r\n  ]);\r\n\r\n  // delete product after confirming\r\n  const handleDelete = (id) => {\r\n    if (window.confirm(\"Are you sure you wanna delete this product?\"))\r\n      dispatch(deleteProduct(id));\r\n  };\r\n  // create a new dummy product\r\n  const handleCreateProduct = () => {\r\n    dispatch(createProduct());\r\n  };\r\n  return (\r\n    <>\r\n      <Row className=\"align-items-center\">\r\n        <Col>\r\n          <h1>Products</h1>\r\n        </Col>\r\n        <Col style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n          <Button\r\n            className=\"my-3\"\r\n            style={{\r\n              padding: \"0.5em 1em\",\r\n            }}\r\n            onClick={handleCreateProduct}\r\n          >\r\n            <i className=\"fas fa-plus\" /> Create Product\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      {errorDelete && (\r\n        <Message dismissible variant=\"danger\" duration={10}>\r\n          {errorDelete}\r\n        </Message>\r\n      )}\r\n      {errorCreate && (\r\n        <Message dismissible variant=\"danger\" duration={10}>\r\n          {errorCreate}\r\n        </Message>\r\n      )}\r\n      {loading || loadingCreate || loadingDelete ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message dismissible variant=\"danger\" duration={10}>\r\n          {error}\r\n        </Message>\r\n      ) : (\r\n        <>\r\n          <Table striped bordered responsive className=\"table-sm text-center\">\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>BRAND</th>\r\n                <th>ACTION</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products &&\r\n                products.map((product) => {\r\n                  return (\r\n                    <tr key={product._id}>\r\n                      <td>{product._id}</td>\r\n                      <td>{product.name}</td>\r\n                      <td>\r\n                        {product.price &&\r\n                          product.price.toLocaleString(\"en-US\", {\r\n                            maximumFractionDigits: 2,\r\n                            style: \"currency\",\r\n                            currency: \"USD\",\r\n                          })}\r\n                      </td>\r\n                      <td>{product.category}</td>\r\n                      <td>{product.brand}</td>\r\n\r\n                      <td\r\n                        style={{\r\n                          display: \"flex\",\r\n                          alignItems: \"center\",\r\n                          justifyContent: \"space-around\",\r\n                        }}\r\n                      >\r\n                        <LinkContainer\r\n                          to={`/admin/product/${product._id}/edit`}\r\n                        >\r\n                          <Button variant=\"link\" className=\"btn-sm\">\r\n                            <i className=\"fas fa-edit\" />\r\n                          </Button>\r\n                        </LinkContainer>\r\n                        <Button\r\n                          className=\"btn-sm\"\r\n                          onClick={() => handleDelete(product._id)}\r\n                          variant=\"danger\"\r\n                        >\r\n                          <i\r\n                            style={{\r\n                              fontSize: \"0.9em\",\r\n                              padding: \"0\",\r\n                            }}\r\n                            className=\"fas fa-trash\"\r\n                          />\r\n                        </Button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n            </tbody>\r\n          </Table>\r\n          <Paginate pages={pages} page={page} isAdmin={true} />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductListPage;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Form, Button, Image, FloatingLabel, Row, Col } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { listProductDetails, updateProduct } from '../actions/productActions';\r\nimport { PRODUCT_UPDATE_RESET } from '../constants/productConstants';\r\nimport axios from 'axios';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nimport FormContainer from '../components/FormContainer';\r\n\r\nconst ProductEditPage = ({ match, history }) => {\r\n\t// all variable for stroing product details\r\n\tconst productId = match.params.id;\r\n\tconst [name, setName] = useState('');\r\n\tconst [brand, setBrand] = useState('');\r\n\tconst [category, setCategory] = useState('');\r\n\tconst [description, setDescription] = useState('');\r\n\tconst [image, setImage] = useState('');\r\n\tconst [price, setPrice] = useState(0.0);\r\n\tconst [countInStock, setCountInStock] = useState(0);\r\n\r\n\t// to upload product image\r\n\tconst [uploading, setUploading] = useState(false);\r\n\tconst [errorImageUpload, setErrorImageUpload] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst productDetails = useSelector((state) => state.productDetails);\r\n\tconst { loading, product, error } = productDetails;\r\n\r\n\tconst productUpdate = useSelector((state) => state.productUpdate);\r\n\tconst {\r\n\t\tloading: loadingUpdate,\r\n\t\tsuccess: successUpdate,\r\n\t\terror: errorUpdate,\r\n\t} = productUpdate;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\t// fetch user login details\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// fetch new access tokens if user details fail, using the refresh token\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(listProductDetails(productId));\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\t// update the product details in state\r\n\tuseEffect(() => {\r\n\t\tif (successUpdate) {\r\n\t\t\tdispatch({ type: PRODUCT_UPDATE_RESET });\r\n\t\t\thistory.push('/admin/productlist');\r\n\t\t} else {\r\n\t\t\tif (!product || product._id !== productId) {\r\n\t\t\t\tdispatch(listProductDetails(productId));\r\n\t\t\t} else {\r\n\t\t\t\tsetName(product.name);\r\n\t\t\t\tsetPrice(product.price);\r\n\t\t\t\tsetImage(product.image);\r\n\t\t\t\tsetBrand(product.brand);\r\n\t\t\t\tsetCategory(product.category);\r\n\t\t\t\tsetDescription(product.description);\r\n\t\t\t\tsetCountInStock(product.countInStock);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [product, dispatch, productId, history, successUpdate]);\r\n\r\n\t// submit the product details\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(\r\n\t\t\tupdateProduct({\r\n\t\t\t\t_id: productId,\r\n\t\t\t\tname,\r\n\t\t\t\tbrand,\r\n\t\t\t\tprice,\r\n\t\t\t\tcategory,\r\n\t\t\t\tdescription,\r\n\t\t\t\tcountInStock,\r\n\t\t\t\timage,\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\t// for image input, use a ref\r\n\tconst inputFile = useRef(null);\r\n\r\n\t// click the above ref, to handle the overlay div above the product image\r\n\tconst handleImageClick = () => {\r\n\t\tinputFile.current.click();\r\n\t};\r\n\r\n\t// submit file to aws bucket, get the url\r\n\tconst handleFileUpload = async (e) => {\r\n\t\tconst file = e.target.files[0];\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('image', file);\r\n\t\tsetUploading(true);\r\n\t\ttry {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.post('/api/upload', formData, config);\r\n\t\t\tsetImage(data);\r\n\t\t\tsetUploading(false);\r\n\t\t} catch (error) {\r\n\t\t\tsetErrorImageUpload('Please choose a valid image');\r\n\t\t\tsetUploading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Link to='/admin/productlist'>\r\n\t\t\t\t<Button variant='outline-primary' className='mt-3'>\r\n\t\t\t\t\tGo Back\r\n\t\t\t\t</Button>\r\n\t\t\t</Link>\r\n\t\t\t<FormContainer style={{ marginTop: '-2em' }}>\r\n\t\t\t\t<h1>Edit Product</h1>\r\n\t\t\t\t{loadingUpdate ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : errorUpdate ? (\r\n\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t{errorUpdate}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\tdismissible\r\n\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\tduration={10}>\r\n\t\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='name'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='nameinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Name'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Name'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetName(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='price'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='priceinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Price'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter price'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={price}\r\n\t\t\t\t\t\t\t\t\t\t\tmin='0'\r\n\t\t\t\t\t\t\t\t\t\t\tmax='1000'\r\n\t\t\t\t\t\t\t\t\t\t\tstep='0.1'\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetPrice(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t{errorImageUpload && (\r\n\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\tdismissible\r\n\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\tduration={10}>\r\n\t\t\t\t\t\t\t\t\t\t{errorImageUpload}\r\n\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{uploading ? (\r\n\t\t\t\t\t\t\t\t\t<div>Uploading...</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Form.Group controlId='image'>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col md={9}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='imageinput'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel='Image URL'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter image URL'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={image}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetImage(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col md={3}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taccept='image/*'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='file'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid='file'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={inputFile}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleFileUpload}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='profile-page-image'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talignSelf: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={image}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle='Click to input file'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder: '1px solid #ced4da',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginBottom: '1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'0.25rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='image-overlay-product'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleImageClick\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tClick to upload image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='brand'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='brandinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Brand'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter brand'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={brand}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetBrand(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='category'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='categoryinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Category'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter category'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={category}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetCategory(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='description'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='descinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Description'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter description URL'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetDescription(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='countInStock'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='countinstockinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='CountInStock'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Count In Stock'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\tmin='0'\r\n\t\t\t\t\t\t\t\t\t\t\tmax='1000'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={countInStock}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetCountInStock(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\tclassName='my-1 ms-auto'>\r\n\t\t\t\t\t\t\t\t\t\tUpdate Product\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</FormContainer>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ProductEditPage;\r\n","import React, { useEffect } from \"react\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Table, Button, Row, Col } from \"react-bootstrap\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport Paginate from \"../components/Paginate\";\r\nimport { refreshLogin } from \"../actions/userActions\";\r\nimport { listAllOrders } from \"../actions/orderActions\";\r\nimport getDateString from \"../utils/getDateString\";\r\n\r\nconst ProductListPage = ({ history, match }) => {\r\n  const pageNumber = match.params.pageNumber || 1; // to fetch various pages of orders\r\n  const dispatch = useDispatch();\r\n  const orderListAll = useSelector((state) => state.orderListAll); // to avoid blank screen display\r\n  const { loading, orders, error, page, pages, total } = orderListAll;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const userDetails = useSelector((state) => state.userDetails);\r\n  const { error: userLoginError } = userDetails;\r\n\r\n  // refresh access tokens aif user details are failed\r\n  useEffect(() => {\r\n    if (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n      user && dispatch(refreshLogin(user.email));\r\n    }\r\n  }, [userLoginError, dispatch, userInfo]);\r\n\r\n  // get all orders by pagenumber\r\n  useEffect(() => {\r\n    if (userInfo && userInfo.isAdmin) dispatch(listAllOrders(pageNumber));\r\n    else history.push(\"/login\");\r\n  }, [dispatch, history, userInfo, pageNumber]);\r\n\r\n  return (\r\n    <>\r\n      <Row className=\"align-items-center\">\r\n        <Col>\r\n          <h1>All Orders ({`${total || 0}`})</h1>\r\n        </Col>\r\n      </Row>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message dismissible variant=\"danger\" duration={10}>\r\n          {error}\r\n        </Message>\r\n      ) : (\r\n        <Table striped bordered responsive className=\"table-sm text-center\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>USER</th>\r\n              <th>TOTAL</th>\r\n              <th>DATE</th>\r\n              <th>PAID</th>\r\n              <th>DELIVERED</th>\r\n              <th>ACTION</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {orders &&\r\n              orders.map((order) => {\r\n                return (\r\n                  <tr key={order._id}>\r\n                    <td>{order._id}</td>\r\n                    <td>{order.user && order.user.name}</td>\r\n                    <td>\r\n                      {order.totalPrice.toLocaleString(\"en-US\", {\r\n                        maximumFractionDigits: 2,\r\n                        style: \"currency\",\r\n                        currency: \"USD\",\r\n                      })}\r\n                    </td>\r\n                    <td>{getDateString(order.createdAt)}</td>\r\n                    <td>\r\n                      {order.isPaid ? (\r\n                        getDateString(order.paidAt)\r\n                      ) : (\r\n                        <i\r\n                          className=\"fas fa-times\"\r\n                          style={{\r\n                            color: \"red\",\r\n                          }}\r\n                        />\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      {order.isDelivered ? (\r\n                        getDateString(order.deliveredAt)\r\n                      ) : (\r\n                        <i\r\n                          className=\"fas fa-times\"\r\n                          style={{\r\n                            color: \"red\",\r\n                          }}\r\n                        />\r\n                      )}\r\n                    </td>\r\n                    <td\r\n                      style={{\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"space-around\",\r\n                      }}\r\n                    >\r\n                      <LinkContainer to={`/order/${order._id}`}>\r\n                        <Button variant=\"link\" className=\"btn-sm\">\r\n                          View Details\r\n                        </Button>\r\n                      </LinkContainer>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </Table>\r\n      )}\r\n      <Paginate pages={pages} page={page} isAdmin={true} forOrders={true} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductListPage;\r\n","export default __webpack_public_path__ + \"static/media/404Error.0ed04e00.png\";","import React from 'react';\r\nimport errorImg from '../assets/404Error.png';\r\nimport { Link } from 'react-router-dom';\r\nimport '../styles/error-page.css';\r\n\r\n// 404 page\r\nconst ErrorPage = () => {\r\n\treturn (\r\n\t\t<div className='text-center'>\r\n\t\t\t<img className='error-img' alt='error' src={errorImg} />\r\n\t\t\t<p className='mb-0 mt-3 text-error'>\r\n\t\t\t\t<i className='far fa-frown' /> Looks like this page does not\r\n\t\t\t\texist.\r\n\t\t\t</p>\r\n\t\t\t<p className='mt-0 text-error'>\r\n\t\t\t\tGo Back to the <Link to='/'>Home Page</Link>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ErrorPage;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t\t'worker. To learn more, visit https://cra.link/PWA'\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://cra.link/PWA.'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { 'Service-Worker': 'script' },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null &&\r\n\t\t\t\t\tcontentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { ToastContainer, Toast } from 'react-bootstrap';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport './styles/update-toast.css';\r\n\r\nconst ServiceWorkerWrapper = () => {\r\n\tconst [showReload, setShowReload] = useState(false);\r\n\tconst [waitingWorker, setWaitingWorker] = useState(null);\r\n\r\n\tconst onSWUpdate = (registration) => {\r\n\t\tsetShowReload(true);\r\n\t\tsetWaitingWorker(registration.waiting);\r\n\t};\r\n\r\n\t// register the service worker on page load\r\n\tuseEffect(() => {\r\n\t\tserviceWorkerRegistration.register({ onUpdate: onSWUpdate });\r\n\t}, []);\r\n\r\n\t// skip waiting and install new updates on page reload\r\n\tconst reloadPage = () => {\r\n\t\twaitingWorker?.postMessage({ type: 'SKIP_WAITING' });\r\n\t\tsetShowReload(false);\r\n\t\twindow.location.reload(true);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ToastContainer className='update-toast' onClick={reloadPage}>\r\n\t\t\t<Toast show={showReload} onClose={reloadPage} bg='dark'>\r\n\t\t\t\t<Toast.Header>\r\n\t\t\t\t\t<strong className='me-auto text-black'>\r\n\t\t\t\t\t\tNew Version Available\r\n\t\t\t\t\t</strong>\r\n\t\t\t\t</Toast.Header>\r\n\t\t\t\t<Toast.Body className='text-white'>\r\n\t\t\t\t\tReload to see whats new!\r\n\t\t\t\t</Toast.Body>\r\n\t\t\t</Toast>\r\n\t\t</ToastContainer>\r\n\t);\r\n};\r\n\r\nexport default ServiceWorkerWrapper;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport Header from \"./components/Header\";\r\nimport Footer from \"./components/Footer\";\r\n\r\nimport HomePage from \"./pages/HomePage\";\r\nimport ProductPage from \"./pages/ProductPage\";\r\nimport CartPage from \"./pages/CartPage\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport RegisterPage from \"./pages/RegisterPage\";\r\nimport ProfilePage from \"./pages/ProfilePage\";\r\nimport ConfirmPage from \"./pages/ConfirmPage\";\r\nimport ShippingPage from \"./pages/ShippingPage\";\r\nimport PaymentPage from \"./pages/PaymentPage\";\r\nimport PlaceOrderPage from \"./pages/PlaceOrderPage\";\r\nimport OrderPage from \"./pages/OrderPage\";\r\nimport PasswordResetPage from \"./pages/PasswordResetPage\";\r\nimport UserListPage from \"./pages/UserListPage\";\r\nimport UserEditPage from \"./pages/UserEditPage\";\r\nimport ProductListPage from \"./pages/ProductListPage\";\r\nimport ProductEditPage from \"./pages/ProductEditPage\";\r\nimport OrderListPage from \"./pages/OrderListPage\";\r\nimport ErrorPage from \"./pages/ErrorPage\";\r\n\r\n// for showing the 'new update available' banner and to register the service worker\r\nimport ServiceWorkerWrapper from \"./ServiceWorkerWrapper\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <Header />\r\n      <ServiceWorkerWrapper />\r\n\r\n      <main className=\"py-2\">\r\n        <Container>\r\n          <Switch>\r\n            <Route path=\"/\" component={HomePage} exact />\r\n            <Route path=\"/search/:keyword\" component={HomePage} exact />\r\n            <Route path=\"/page/:pageNumber\" component={HomePage} exact />\r\n            <Route\r\n              path=\"/search/:keyword/page/:pageNumber\"\r\n              exact\r\n              component={HomePage}\r\n            />\r\n            <Route path=\"/login\" component={LoginPage} />\r\n            <Route path=\"/register\" component={RegisterPage} />\r\n            <Route\r\n              path=\"/user/password/reset/:token\"\r\n              component={PasswordResetPage}\r\n            />\r\n            <Route path=\"/profile\" component={ProfilePage} />\r\n            <Route path=\"/product/:id\" component={ProductPage} />\r\n            <Route path=\"/cart/:id?\" component={CartPage} />\r\n            <Route path=\"/user/confirm/:token\" component={ConfirmPage} exact />\r\n            <Route path=\"/shipping\" component={ShippingPage} />\r\n            <Route path=\"/payment\" component={PaymentPage} />\r\n            <Route path=\"/placeorder\" component={PlaceOrderPage} />\r\n            <Route path=\"/order/:id\" component={OrderPage} />\r\n            <Route path=\"/admin/userlist\" component={UserListPage} exact />\r\n            <Route\r\n              path=\"/admin/userlist/:pageNumber\"\r\n              component={UserListPage}\r\n              exact\r\n            />\r\n            <Route path=\"/admin/user/:id/edit\" component={UserEditPage} />\r\n            <Route\r\n              path=\"/admin/productlist\"\r\n              exact\r\n              component={ProductListPage}\r\n            />\r\n            <Route\r\n              path=\"/admin/productlist/:pageNumber\"\r\n              component={ProductListPage}\r\n              exact\r\n            />\r\n            <Route path=\"/admin/product/:id/edit\" component={ProductEditPage} />\r\n            <Route path=\"/admin/orderlist\" component={OrderListPage} exact />\r\n            <Route\r\n              path=\"/admin/orderlist/:pageNumber\"\r\n              component={OrderListPage}\r\n              exact\r\n            />\r\n            <Route component={ErrorPage} />\r\n          </Switch>\r\n        </Container>\r\n      </main>\r\n      <Footer />\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { createStore, applyMiddleware, combineReducers } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nimport {\r\n\tproductListReducer,\r\n\tproductDetailsReducer,\r\n\tproductDeleteReducer,\r\n\tproductCreateReducer,\r\n\tproductCreateReviewReducer,\r\n\tproductUpdateReducer,\r\n\tproductTopRatedReducer,\r\n} from './reducers/productReducers';\r\n\r\nimport { cartReducer } from './reducers/cartReducers';\r\n\r\nimport {\r\n\tuserLoginReducer,\r\n\tuserLoginRefreshReducer,\r\n\tuserRegisterReducer,\r\n\tuserSendEmailVerficationReducer,\r\n\tuserConfirmReducer,\r\n\tuserResetPasswordReducer,\r\n\tuserDetailsReducer,\r\n\tuserProfileUpdateReducer,\r\n\tuserListReducer,\r\n\tuserDeleteReducer,\r\n\tuserUpdateReducer,\r\n} from './reducers/userReducers';\r\n\r\nimport {\r\n\torderCreateReducer,\r\n\torderDetailsReducer,\r\n\torderPayReducer,\r\n\torderDeliverReducer,\r\n\torderListUserReducer,\r\n\torderListAllReducer,\r\n} from './reducers/orderReducers';\r\n\r\n// combine all the above reducers to the store\r\nconst reducer = combineReducers({\r\n\tproductList: productListReducer,\r\n\tproductDetails: productDetailsReducer,\r\n\tproductDelete: productDeleteReducer,\r\n\tproductCreate: productCreateReducer,\r\n\tproductCreateReview: productCreateReviewReducer,\r\n\tproductUpdate: productUpdateReducer,\r\n\tproductTopRated: productTopRatedReducer,\r\n\tcart: cartReducer,\r\n\tuserLogin: userLoginReducer,\r\n\tuserLoginRefresh: userLoginRefreshReducer,\r\n\tuserRegister: userRegisterReducer,\r\n\tuserSendEmailVerfication: userSendEmailVerficationReducer,\r\n\tuserConfirm: userConfirmReducer,\r\n\tuserResetPassword: userResetPasswordReducer,\r\n\tuserDetails: userDetailsReducer,\r\n\tuserProfileUpdate: userProfileUpdateReducer,\r\n\tuserList: userListReducer,\r\n\tuserDelete: userDeleteReducer,\r\n\tuserUpdate: userUpdateReducer,\r\n\torderCreate: orderCreateReducer,\r\n\torderDetails: orderDetailsReducer,\r\n\torderPay: orderPayReducer,\r\n\torderDeliver: orderDeliverReducer,\r\n\torderListUser: orderListUserReducer,\r\n\torderListAll: orderListAllReducer,\r\n});\r\n\r\n// get a few cart items from the local storage\r\nconst cartItemsFromLocalStorage = localStorage.getItem('cartItems')\r\n\t? JSON.parse(localStorage.getItem('cartItems'))\r\n\t: [];\r\n\r\n// get the user info from local storage\r\nconst userInfoFromLocalStorage = localStorage.getItem('userInfo')\r\n\t? JSON.parse(localStorage.getItem('userInfo'))\r\n\t: null;\r\n\r\n// get the shipping address from local storage\r\nconst shippingAddressFromLocalStorage = localStorage.getItem('shippingAddress')\r\n\t? JSON.parse(localStorage.getItem('shippingAddress'))\r\n\t: {};\r\n\r\n// get refresh token from the local storage\r\nconst tokenInfoFromLocalStoage = localStorage.getItem('refreshToken')\r\n\t? localStorage.getItem('refreshToken')\r\n\t: null;\r\n\r\n// set the initial state based on above local storage values\r\nconst initialState = {\r\n\tcart: {\r\n\t\tcartItems: [...cartItemsFromLocalStorage],\r\n\t\tshippingAddress: shippingAddressFromLocalStorage,\r\n\t},\r\n\tuserLogin: {\r\n\t\tuserInfo: userInfoFromLocalStorage,\r\n\t},\r\n\tuserLoginRefresh: {\r\n\t\ttokenInfo: tokenInfoFromLocalStoage,\r\n\t},\r\n};\r\n\r\n// user redux thunk for making async calls\r\nconst middleware = [thunk];\r\n\r\n// create the redux store\r\nconst store = createStore(\r\n\treducer,\r\n\tinitialState,\r\n\tcomposeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n","import {\r\n\tPRODUCT_LIST_REQUEST,\r\n\tPRODUCT_LIST_SUCCESS,\r\n\tPRODUCT_LIST_FAILURE,\r\n\tPRODUCT_DETAILS_FAILURE,\r\n\tPRODUCT_DETAILS_REQUEST,\r\n\tPRODUCT_DETAILS_SUCCESS,\r\n\tPRODUCT_DELETE_FAILURE,\r\n\tPRODUCT_DELETE_REQUEST,\r\n\tPRODUCT_DELETE_SUCCESS,\r\n\tPRODUCT_CREATE_SUCCESS,\r\n\tPRODUCT_CREATE_FAILURE,\r\n\tPRODUCT_CREATE_REQUEST,\r\n\tPRODUCT_CREATE_RESET,\r\n\tPRODUCT_UPDATE_SUCCESS,\r\n\tPRODUCT_UPDATE_FAILURE,\r\n\tPRODUCT_UPDATE_REQUEST,\r\n\tPRODUCT_UPDATE_RESET,\r\n\tPRODUCT_CREATE_REVIEW_SUCCESS,\r\n\tPRODUCT_CREATE_REVIEW_FAILURE,\r\n\tPRODUCT_CREATE_REVIEW_REQUEST,\r\n\tPRODUCT_CREATE_REVIEW_RESET,\r\n\tPRODUCT_TOP_RATED_SUCCESS,\r\n\tPRODUCT_TOP_RATED_FAILURE,\r\n\tPRODUCT_TOP_RATED_REQUEST,\r\n} from '../constants/productConstants';\r\n\r\n// list products based on keyword and paginated page number\r\nexport const productListReducer = (state = { products: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_LIST_REQUEST:\r\n\t\t\treturn { loading: true, products: [] };\r\n\r\n\t\tcase PRODUCT_LIST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tproducts: action.payload.products,\r\n\t\t\t\tpage: action.payload.page,\r\n\t\t\t\tpages: action.payload.pages,\r\n\t\t\t};\r\n\r\n\t\tcase PRODUCT_LIST_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn { state };\r\n\t}\r\n};\r\n\r\n// details about a particular product\r\nexport const productDetailsReducer = (\r\n\tstate = { product: { reviews: [] } },\r\n\taction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_DETAILS_REQUEST:\r\n\t\t\treturn { loading: true, ...state };\r\n\t\tcase PRODUCT_DETAILS_SUCCESS:\r\n\t\t\treturn { loading: false, product: action.payload };\r\n\t\tcase PRODUCT_DETAILS_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const productDeleteReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_DELETE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase PRODUCT_DELETE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true };\r\n\t\tcase PRODUCT_DELETE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const productCreateReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_CREATE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase PRODUCT_CREATE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true, product: action.payload };\r\n\t\tcase PRODUCT_CREATE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase PRODUCT_CREATE_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const productCreateReviewReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_CREATE_REVIEW_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase PRODUCT_CREATE_REVIEW_SUCCESS:\r\n\t\t\treturn { loading: false, success: true };\r\n\t\tcase PRODUCT_CREATE_REVIEW_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase PRODUCT_CREATE_REVIEW_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const productUpdateReducer = (state = { product: {} }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_UPDATE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase PRODUCT_UPDATE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true, product: action.payload };\r\n\t\tcase PRODUCT_UPDATE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase PRODUCT_UPDATE_RESET:\r\n\t\t\treturn { product: {} };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// fetching top rated products\r\nexport const productTopRatedReducer = (state = { products: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_TOP_RATED_REQUEST:\r\n\t\t\treturn { loading: true, products: [] };\r\n\t\tcase PRODUCT_TOP_RATED_SUCCESS:\r\n\t\t\treturn { loading: false, products: action.payload };\r\n\t\tcase PRODUCT_TOP_RATED_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n","import {\r\n\tCART_ADD_ITEM,\r\n\tCART_REMOVE_ITEM,\r\n\tCART_SAVE_SHIPPING_ADDRESS,\r\n\tCART_SAVE_PAYMENT_METHOD,\r\n\tCART_RESET,\r\n} from '../constants/cartConstants';\r\n\r\nexport const cartReducer = (\r\n\tstate = { cartItems: [], shippingAddress: {} },\r\n\taction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase CART_ADD_ITEM:\r\n\t\t\tconst item = action.payload;\r\n\r\n\t\t\t// check if the item exists in the cart\r\n\t\t\tconst existingItem = state.cartItems.find(\r\n\t\t\t\t(ele) => ele.product === item.product\r\n\t\t\t);\r\n\t\t\tif (existingItem) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcartItems: state.cartItems.map((ele) =>\r\n\t\t\t\t\t\tele.product === existingItem.product ? item : ele\r\n\t\t\t\t\t),\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcartItems: [...state.cartItems, item],\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\tcase CART_REMOVE_ITEM:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcartItems: state.cartItems.filter(\r\n\t\t\t\t\t(ele) => ele.product !== action.payload\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\tcase CART_SAVE_SHIPPING_ADDRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshippingAddress: action.payload,\r\n\t\t\t};\r\n\t\tcase CART_SAVE_PAYMENT_METHOD:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpaymentMethod: action.payload,\r\n\t\t\t};\r\n\t\tcase CART_RESET: {\r\n\t\t\treturn {\r\n\t\t\t\tcartItems: [],\r\n\t\t\t\tshippingAddress: action.payload,\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n","import {\r\n\tUSER_LOGIN_FAILURE,\r\n\tUSER_LOGIN_REQUEST,\r\n\tUSER_LOGIN_SUCCESS,\r\n\tUSER_LOGOUT,\r\n\tUSER_REGISTER_FAILURE,\r\n\tUSER_REGISTER_SUCCESS,\r\n\tUSER_REGISTER_REQUEST,\r\n\tUSER_RESET_PASSWORD_FAILURE,\r\n\tUSER_RESET_PASSWORD_SUCCESS,\r\n\tUSER_RESET_PASSWORD_REQUEST,\r\n\tUSER_EMAIL_VERIFICATION_REQUEST,\r\n\tUSER_EMAIL_VERIFICATION_SUCCESS,\r\n\tUSER_EMAIL_VERIFICATION_FAILURE,\r\n\tUSER_CONFIRM_REQUEST,\r\n\tUSER_CONFIRM_SUCCESS,\r\n\tUSER_CONFIRM_FAILURE,\r\n\tUSER_DETAILS_FAILURE,\r\n\tUSER_DETAILS_SUCCESS,\r\n\tUSER_DETAILS_REQUEST,\r\n\tUSER_DETAILS_RESET,\r\n\tUSER_PROFILE_UPDATE_REQUEST,\r\n\tUSER_PROFILE_UPDATE_SUCCESS,\r\n\tUSER_PROFILE_UPDATE_FAILURE,\r\n\tUSER_PROFILE_UPDATE_RESET,\r\n\tUSER_LOGIN_REFRESH_REQUEST,\r\n\tUSER_LOGIN_REFRESH_SUCCESS,\r\n\tUSER_LOGIN_REFRESH_FAILURE,\r\n\tUSER_LIST_REQUEST,\r\n\tUSER_LIST_SUCCESS,\r\n\tUSER_LIST_FAILURE,\r\n\tUSER_LIST_RESET,\r\n\tUSER_DELETE_REQUEST,\r\n\tUSER_DELETE_SUCCESS,\r\n\tUSER_DELETE_FAILURE,\r\n\tUSER_UPDATE_REQUEST,\r\n\tUSER_UPDATE_SUCCESS,\r\n\tUSER_UPDATE_FAILURE,\r\n\tUSER_UPDATE_RESET,\r\n} from '../constants/userConstants';\r\n\r\nexport const userLoginReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_LOGIN_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_LOGIN_SUCCESS:\r\n\t\t\treturn { loading: false, userInfo: action.payload };\r\n\t\tcase USER_LOGIN_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_LOGOUT:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// use refresh token to obtain new access token for the logged in user\r\nexport const userLoginRefreshReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_LOGIN_REFRESH_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_LOGIN_REFRESH_SUCCESS:\r\n\t\t\treturn { loading: false, tokenInfo: action.payload };\r\n\t\tcase USER_LOGIN_REFRESH_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// sending an email for account verification\r\nexport const userSendEmailVerficationReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_EMAIL_VERIFICATION_REQUEST:\r\n\t\t\treturn { isLoading: true };\r\n\t\tcase USER_EMAIL_VERIFICATION_SUCCESS:\r\n\t\t\treturn { isLoading: true, emailSent: action.payload };\r\n\t\tcase USER_EMAIL_VERIFICATION_FAILURE:\r\n\t\t\treturn { isLoading: true, hasError: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update user account to confirmed\r\nexport const userConfirmReducer = (state = { isConfirmed: false }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_CONFIRM_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_CONFIRM_SUCCESS:\r\n\t\t\treturn { loading: false, isConfirmed: action.payload };\r\n\t\tcase USER_CONFIRM_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// reset the user password\r\nexport const userResetPasswordReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_RESET_PASSWORD_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_RESET_PASSWORD_SUCCESS:\r\n\t\t\treturn { loading: false, resetPassword: action.payload };\r\n\t\tcase USER_RESET_PASSWORD_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault: {\r\n\t\t\treturn { ...state };\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// register user using email and password\r\nexport const userRegisterReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_REGISTER_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_REGISTER_SUCCESS:\r\n\t\t\treturn { loading: false, userInfo: action.payload };\r\n\t\tcase USER_REGISTER_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// fetch user details\r\nexport const userDetailsReducer = (state = { user: {} }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_DETAILS_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_DETAILS_SUCCESS:\r\n\t\t\treturn { loading: false, user: action.payload };\r\n\t\tcase USER_DETAILS_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_DETAILS_RESET:\r\n\t\t\treturn { user: {} };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update user profile, not in admin view\r\nexport const userProfileUpdateReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_PROFILE_UPDATE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase USER_PROFILE_UPDATE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true, userInfo: action.payload };\r\n\t\tcase USER_PROFILE_UPDATE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_PROFILE_UPDATE_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// list all users for the admin view\r\nexport const userListReducer = (state = { users: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_LIST_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase USER_LIST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tusers: action.payload.users,\r\n\t\t\t\tpage: action.payload.page,\r\n\t\t\t\tpages: action.payload.pages,\r\n\t\t\t\ttotal: action.payload.total,\r\n\t\t\t};\r\n\t\tcase USER_LIST_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_LIST_RESET:\r\n\t\t\treturn { users: [] };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const userDeleteReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_DELETE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase USER_DELETE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true };\r\n\t\tcase USER_DELETE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update user from the admin panel view\r\nexport const userUpdateReducer = (state = { user: {} }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_UPDATE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase USER_UPDATE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true };\r\n\t\tcase USER_UPDATE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_UPDATE_RESET:\r\n\t\t\treturn { user: {} };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n","import {\r\n\tORDER_CREATE_REQUEST,\r\n\tORDER_CREATE_SUCCESS,\r\n\tORDER_CREATE_FAILURE,\r\n\tORDER_CREATE_RESET,\r\n\tORDER_DETAILS_REQUEST,\r\n\tORDER_DETAILS_SUCCESS,\r\n\tORDER_DETAILS_FAILURE,\r\n\tORDER_PAY_REQUEST,\r\n\tORDER_PAY_SUCCESS,\r\n\tORDER_PAY_FAILURE,\r\n\tORDER_PAY_RESET,\r\n\tORDER_DELIVER_REQUEST,\r\n\tORDER_DELIVER_SUCCESS,\r\n\tORDER_DELIVER_FAILURE,\r\n\tORDER_DELIVER_RESET,\r\n\tORDER_USER_LIST_REQUEST,\r\n\tORDER_USER_LIST_SUCCESS,\r\n\tORDER_USER_LIST_FAILURE,\r\n\tORDER_USER_LIST_RESET,\r\n\tORDER_ALL_LIST_REQUEST,\r\n\tORDER_ALL_LIST_SUCCESS,\r\n\tORDER_ALL_LIST_FAILURE,\r\n} from '../constants/orderConstants';\r\n\r\n// create an order\r\nexport const orderCreateReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_CREATE_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_CREATE_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\torder: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_CREATE_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_CREATE_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// get order details\r\nexport const orderDetailsReducer = (\r\n\tstate = { loading: true, orderItems: [], shippingAddress: {} },\r\n\taction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_DETAILS_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_DETAILS_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\torder: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_DETAILS_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update order payment options\r\nexport const orderPayReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_PAY_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_PAY_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t};\r\n\t\tcase ORDER_PAY_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_PAY_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update order to be delivered or not\r\nexport const orderDeliverReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_DELIVER_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_DELIVER_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t};\r\n\t\tcase ORDER_DELIVER_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_DELIVER_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// reducer to list orders of the particular user\r\nexport const orderListUserReducer = (state = { orders: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_USER_LIST_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_USER_LIST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\torders: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_USER_LIST_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_USER_LIST_RESET:\r\n\t\t\treturn { orders: [] };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// reducer to list all orders for the admin panel view\r\nexport const orderListAllReducer = (state = { orders: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_ALL_LIST_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_ALL_LIST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\torders: action.payload.orders,\r\n\t\t\t\tpage: action.payload.page,\r\n\t\t\t\tpages: action.payload.pages,\r\n\t\t\t\ttotal: action.payload.total,\r\n\t\t\t};\r\n\t\tcase ORDER_ALL_LIST_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport store from './store';\r\nimport { HelmetProvider } from 'react-helmet-async';\r\nimport './bootstrap.min.css';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<React.StrictMode>\r\n\t\t\t<HelmetProvider>\r\n\t\t\t\t<App />\r\n\t\t\t</HelmetProvider>\r\n\t\t</React.StrictMode>\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n"],"sourceRoot":""}